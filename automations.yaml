- id: '1597672576485'
  alias: Abstellkammer Licht aus nach Timer zum Strom sparen
  description: ''
  trigger:
  - entity_id: light.deckenlicht
    platform: state
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.deckenlicht
        state: 'on'
      sequence:
      - data: {}
        entity_id: script.abstellraum_licht_timer
        service: script.turn_off
      - data: {}
        entity_id: script.abstellraum_licht_timer
        service: script.turn_on
    - conditions:
      - condition: state
        entity_id: light.deckenlicht
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.abstellraum_licht_timer
        service: script.turn_off
    default: []
  mode: single
- id: c2b4af6552d5ef9ac7576742bc8a0a74
  alias: Aufladen automatisch beenden reset beendet (Living Charge)
  trigger:
  - entity_id: switch.charger_relay
    platform: state
    to: 'off'
  action:
  - entity_id: input_boolean.automatic_charging_control
    service: input_boolean.turn_on
  initial_state: true
- id: e6174789ceedc698677de2917e708a03
  alias: Aufladen beendet (Living Charge)
  trigger:
  - below: '1.2'
    entity_id: sensor.charger_wattage
    platform: numeric_state
  condition:
  - condition: state
    entity_id: switch.charger_relay
    state: 'on'
  - condition: state
    entity_id: input_boolean.automatic_charging_control
    state: 'on'
  action:
  - entity_id: switch.charger_relay
    service: switch.turn_off
  - data:
      message: Aufladen im Wohnzimmer beendet
    service: notify.send_to_input_text
  initial_state: true
  mode: single
- id: '1587050057539'
  alias: Aufladen beendet - Power Charger (Living Charger)
  description: ''
  trigger:
  - below: '2'
    entity_id: sensor.power_charger_wattage
    platform: numeric_state
  condition:
  - condition: state
    entity_id: switch.power_charger_relay
    state: 'on'
  action:
  - data: {}
    entity_id: switch.power_charger_relay
    service: switch.turn_off
  - data:
      message: Aufladen im Arbeitszimmer beendet
    service: notify.send_to_input_text
  mode: single
- id: '1587051592118'
  alias: Power Charger on, check if needed (Living Charger)
  description: ''
  trigger:
  - entity_id: switch.power_charger_relay
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    service: script.power_charger_not_used_check
- id: '1587051662107'
  alias: Charger on, check if needed (Living Charger)
  description: ''
  trigger:
  - entity_id: switch.charger_relay
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    service: script.charger_not_used_check
- id: 415f791871428224f7bee82cbc47c202
  alias: Fahre SkyNas für Rsync Backup hoch (Kitchen SkyNas)
  initial_state: true
  trigger:
  - platform: time
    at: 03:00:00
  condition:
  - condition: state
    entity_id: input_boolean.holiday
    state: 'off'
  action:
    service: switch.turn_on
    entity_id: switch.skynas
- id: bb027aa10c638ddb7c6ddcb27877698b
  alias: Fahre Backup Server Filme für Rsync Backup hoch (Kitchen SkyNas)
  initial_state: true
  trigger:
  - platform: time
    at: 03:00:00
  condition:
  - condition: state
    entity_id: input_boolean.holiday
    state: 'off'
  action:
    service: switch.turn_on
    entity_id: switch.backup_server_filme
- id: aded564135e70cef56f4167ade53cddf
  alias: Nachricht wenn SkyNas runtergefahren (Kitchen SkyNas)
  trigger:
  - platform: state
    entity_id: switch.skynas
    to: 'off'
  action:
  - service: notify.send_to_input_text
    data:
      message: SkysServer runtergefahren
  - service: shell_command.comlicated_app
    data:
      complications: graphicCorner
      value: 'AUS

        Server Status'
  - service: shell_command.comlicated_app
    data:
      complications: utilitarianSmall
      value: Server aus
  initial_state: true
  mode: single
- id: 4d8f896625e0de99c756a16da3e7ce3e
  alias: Nachricht wenn SkyNas hochgefahren (Kitchen SkyNas)
  trigger:
  - platform: state
    entity_id: switch.skynas
    to: 'on'
  action:
  - service: notify.send_to_input_text
    data:
      message: SkysServer hochgefahren
  - service: shell_command.comlicated_app
    data:
      complications: graphicCorner
      value: 'AN

        Server Status'
  - service: shell_command.comlicated_app
    data:
      complications: utilitarianSmall
      value: Server AN
  initial_state: true
  mode: single
- id: c7c4fc7e6d5d07ac460fb129549aab00
  alias: Cleaning mode aktiviert (General Cleaning)
  initial_state: true
  trigger:
  - platform: state
    entity_id: input_boolean.cleaning_mode
    from: 'off'
    to: 'on'
  action:
  - service: homeassistant.turn_on
    entity_id: group.all_light
- id: 929e542b827bba368b87a93e0b2ef7be
  alias: Gleiches Lautstärke für alle Alexa wenn Musik überall spielt (General Alexa)
  initial_state: true
  trigger:
  - platform: state
    entity_id: sensor.spotify_speaker
    to: Überall
  - platform: state
    entity_id: input_number.alexa_max_volume
  condition:
  - condition: state
    entity_id: sensor.spotify_speaker
    state: Überall
  action:
  - service: media_player.volume_set
    data_template:
      entity_id: media_player.kuche
      volume_level: '{{ states("input_number.alexa_max_volume")|int / 10 }}'
  - service: media_player.volume_set
    data_template:
      entity_id: media_player.schlafzimmer
      volume_level: '{{ states("input_number.alexa_max_volume")|int / 10 }}'
  - service: media_player.volume_set
    data_template:
      entity_id: media_player.wohnzimmer
      volume_level: '{{ states("input_number.alexa_max_volume")|int / 10 }}'
  - service: media_player.volume_set
    data_template:
      entity_id: media_player.arbeitszimmer
      volume_level: '{{ states("input_number.alexa_max_volume")|int / 10 }}'
- id: '1586951160002'
  alias: Home Office Off (Kitchen Home Office)
  description: ''
  trigger:
  - entity_id: sensor.monitor_wattage
    platform: numeric_state
    below: '3'
  - below: '20'
    entity_id: sensor.laptop_wattage
    platform: numeric_state
  condition:
  - condition: or
    conditions:
    - condition: numeric_state
      entity_id: sensor.laptop_wattage
      below: '3'
    - condition: numeric_state
      entity_id: sensor.monitor_wattage
      below: '20'
  action:
  - data: {}
    entity_id: input_boolean.home_office
    service: input_boolean.turn_off
  - condition: state
    entity_id: input_boolean.sleepmode
    state: 'off'
  - data: {}
    entity_id: input_boolean.silent_messages_only
    service: input_boolean.turn_off
  mode: single
- id: e6f1a742ec393e308508cb0df06305e1
  alias: Home Office On (Kitchen Home office)
  trigger:
  - above: '20'
    entity_id: sensor.laptop_wattage
    platform: numeric_state
  - above: '20'
    entity_id: sensor.monitor_wattage
    platform: numeric_state
  condition:
  - above: '20'
    condition: numeric_state
    entity_id: sensor.laptop_wattage
  - above: '20'
    condition: numeric_state
    entity_id: sensor.monitor_wattage
  action:
  - entity_id: input_boolean.home_office
    service: input_boolean.turn_on
  - data: {}
    entity_id: input_boolean.silent_messages_only
    service: input_boolean.turn_on
  initial_state: true
  mode: single
- id: 2d2fe55e62b039b8754d270010169017
  alias: Movie Server Backup Abort after 5 hours (General movie backup server)
  initial_state: true
  trigger:
  - platform: state
    entity_id: switch.backup_server_filme
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.backup_server_movie_shutdown
- id: 213191814aeecc9c2afd086ae400e7b2
  alias: MQTT Switch ON dann Skyserver ON (MQTT)
  initial_state: true
  trigger:
  - platform: state
    entity_id: switch.christians_server
    from: 'off'
    to: 'on'
  action:
    service: switch.turn_on
    entity_id: switch.skynas
- id: 3b8e5708263dc41ad1d9abb15bf5b725
  alias: MQTT Switch OFF wenn Skyserver OFF (MQTT)
  initial_state: true
  trigger:
  - platform: state
    entity_id: switch.skynas
    from: 'on'
    to: 'off'
  - platform: homeassistant
    event: start
  condition:
  - condition: state
    entity_id: switch.skynas
    state: 'off'
  action:
    service: switch.turn_off
    entity_id: switch.christians_server
- id: c9a45fb11d394c6f166ebfa0748d5d19
  alias: MQTT Switch ON wenn Skyserver ON (MQTT)
  initial_state: true
  trigger:
  - platform: state
    entity_id: switch.skynas
    from: 'off'
    to: 'on'
  - platform: homeassistant
    event: start
  condition:
  - condition: state
    entity_id: switch.skynas
    state: 'on'
  action:
    service: switch.turn_on
    entity_id: switch.christians_server
- id: 63ac8635ccd1ebb7bf9775489d3afe03
  alias: Schlafmodus aktiv - Nachrichten nur noch Stumm senden (General Moving Message)
  initial_state: true
  trigger:
  - platform: state
    entity_id: input_boolean.sleepmode
    to: 'on'
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.silent_messages_only
- id: 8172f3c1786f30babf784d7a4d57b689
  alias: Schlafmodus inaktiv - Nachrichten nur noch Stumm senden - off (General Moving
    Message)
  trigger:
  - entity_id: input_boolean.sleepmode
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.home_office
    state: 'off'
  action:
  - entity_id: input_boolean.silent_messages_only
    service: input_boolean.turn_off
  initial_state: true
- id: 5d8be620aadd30933ca21b9179137336
  alias: Nachricht in Schlafzimmer abspielen (General Moving Message Bedroom)
  trigger:
  - entity_id: input_text.message_module
    platform: state
  condition:
  - condition: state
    entity_id: input_boolean.someone_in_bedroom
    state: 'on'
  - condition: state
    entity_id: input_boolean.silent_messages_only
    state: 'off'
  - condition: template
    value_template: '{{ not is_state("input_text.message_module", "###reset###") }}'
  - condition: state
    entity_id: input_boolean.sleepmode_bedroom
    state: 'off'
  action:
  - data_template:
      data:
        type: announce
      message: '{{states.input_text.message_module.state}}'
    service: notify.alexa_media_schlafzimmer
  - data:
      value: '###reset###'
    entity_id: input_text.message_module
    service: input_text.set_value
  initial_state: true
  mode: single
- id: 4b3d218bc932653a6c6008a366aa236f
  alias: Nachricht in Arbeitszimmer abspielen (General Moving Message Bedroom)
  trigger:
  - entity_id: input_text.message_module
    platform: state
  condition:
  - condition: state
    entity_id: input_boolean.someone_in_workingroom
    state: 'on'
  - condition: state
    entity_id: input_boolean.silent_messages_only
    state: 'off'
  - condition: template
    value_template: '{{ not is_state("input_text.message_module", "###reset###")}}'
  - condition: state
    entity_id: input_boolean.sleepmode_workingroom
    state: 'off'
  action:
  - data_template:
      data:
        type: announce
      message: '{{states.input_text.message_module.state}}'
    service: notify.alexa_media_arbeitszimmer
  - data:
      value: '###reset###'
    entity_id: input_text.message_module
    service: input_text.set_value
  initial_state: true
  mode: single
- id: b5e08f18783d516554b9d6f191a4c668
  alias: Nachricht in Küche abspielen (General Moving Message Kitchen)
  trigger:
  - platform: state
    entity_id: input_text.message_module
  condition:
  - condition: state
    entity_id: input_boolean.someone_in_kitchen
    state: 'on'
  - condition: state
    entity_id: input_boolean.silent_messages_only
    state: 'off'
  - condition: template
    value_template: '{{ not is_state("input_text.message_module", "###reset###")}}'
  action:
  - service: notify.alexa_media_kuche
    data_template:
      message: '{{states.input_text.message_module.state}}'
      data:
        type: announce
  - service: input_text.set_value
    entity_id: input_text.message_module
    data:
      value: '###reset###'
  initial_state: true
  mode: single
- id: 5be34859293362fc35c2b0bde7e8d13d
  alias: Nachricht in Wohnzimmer abspielen (General Moving Message Living)
  trigger:
  - platform: state
    entity_id: input_text.message_module
  condition:
  - condition: state
    entity_id: input_boolean.someone_in_living
    state: 'on'
  - condition: state
    entity_id: input_boolean.silent_messages_only
    state: 'off'
  - condition: template
    value_template: '{{ not is_state("input_text.message_module", "###reset###") }}'
  action:
  - service: notify.alexa_media_wohnzimmer
    data_template:
      message: '{{states.input_text.message_module.state}}'
      data:
        type: announce
  - service: input_text.set_value
    entity_id: input_text.message_module
    data:
      value: '###reset###'
  initial_state: true
  mode: single
- id: 7dca0e0f703c5135439fca3e8d8af0f5
  alias: Nachricht - stumm - als text senden (General Moving Message Rest)
  trigger:
  - entity_id: input_text.message_module
    platform: state
  condition:
  - condition: template
    value_template: '{% if is_state("input_boolean.silent_messages_only", "on") or
      is_state("sensor.someone_home", "false") %}true{% else %}false{% endif %}'
  - condition: template
    value_template: '{{ not is_state("input_text.message_module", "###reset###") }}'
  action:
  - data:
      message: '{{ states("input_text.message_module") }}'
    service: script.messages_to_christian
  - data:
      message: '{{ states("input_text.message_module") }}'
    service: script.messages_to_elitsa
  - data:
      value: '###reset###'
    entity_id: input_text.message_module
    service: input_text.set_value
  initial_state: true
- id: b525c6b5b3b39a6183df7eb67dd7a406
  alias: Plex Spielt Server runterfahren abbrechen (Living Plex)
  initial_state: true
  trigger:
  - platform: state
    entity_id: sensor.show_plex_activity
    from: '0'
  - platform: state
    entity_id: input_boolean.server_shutdown_overwrite
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: switch.skynas
    from: 'on'
    to: 'off'
  action:
  - service: script.turn_on
    entity_id: script.shutdown_server_abort
- id: 5201a2b0689b1ffadf86d763af53a85e
  alias: Plex Standby Server runterfahren (Living Plex)
  initial_state: true
  trigger:
  - platform: state
    entity_id: sensor.show_plex_activity
    to: '0'
  - platform: state
    entity_id: input_number.server_shutdown_timer
  condition:
  - condition: numeric_state
    entity_id: sensor.show_plex_activity
    below: 1
  action:
  - service: script.turn_off
    entity_id: script.shutdown_server
  - service: script.turn_on
    entity_id: script.shutdown_server
- id: af8eba75da9355ff891c84ee9571d63d
  alias: Reset all Alexa Echo to default volume (General Alexa)
  trigger:
  - at: 05:00:00
    platform: time
  - entity_id: sensor.spotify_speaker
    from: Überall
    platform: state
  action:
  - data_template:
      entity_id: media_player.kuche
      volume_level: 0.{{ states("input_number.alexa_kitchen_volume")|int }}
    service: media_player.volume_set
  - data_template:
      entity_id: media_player.schlafzimmer
      volume_level: 0.{{ states("input_number.alexa_bedroom_volume")|int }}
    service: media_player.volume_set
  - data_template:
      entity_id: media_player.wohnzimmer
      volume_level: 0.{{ states("input_number.alexa_living_volume")|int }}
    service: media_player.volume_set
  - data_template:
      entity_id: media_player.arbeitszimmer
      volume_level: 0.{{ states("input_number.alexa_workingroom_volume")|int }}
    service: media_player.volume_set
  initial_state: true
  mode: single
- id: 3b8409a8e2e4033b4cc7d3419b743f9c
  alias: say wich windows are open on sleepmode activate (Bedroom Sleepmode)
  trigger:
  - entity_id: input_boolean.sleepmode_bedroom
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: template
    value_template: '{{ states("sensor.window_open_check") | int > 0 }}'
  - condition: state
    entity_id: input_boolean.open_windows_info_given
    state: 'off'
  - condition: state
    entity_id: input_boolean.nickerchen_aktiv
    state: 'off'
  - after: '21:00'
    condition: time
  action:
  - data_template:
      data:
        type: announce
      message: 'Es sind noch Fenster in folgenden Räumen offen: {%- if is_state(''binary_sensor.bathroom_window_manualy'',''on'')
        -%} Badezimmer {% endif %} {%- if is_state(''binary_sensor.bedroom_window_sensor_right'',''on'')
        or is_state(''binary_sensor.schlafzimmer_fenster_links'',''on'') -%} Schlafzimmer
        {% endif %} {%- if is_state(''binary_sensor.kitchen_window_sensor_right'',''on'')
        or is_state(''binary_sensor.kuchen_fenster_links'',''on'') -%} Küche {% endif%}
        {%- if is_state(''binary_sensor.kiving_window_sensor_right'',''on'') or is_state(''binary_sensor.wohnzimmerzimmer_fenster_links'',''on'')
        -%} Wohnzimmer {% endif %} {%- if is_state(''binary_sensor.balkon_fenster_rechts'',''on'')
        or is_state(''binary_sensor.balkon_fenster_links'',''on'') -%} Balkon {% endif
        %} {%- if is_state(''binary_sensor.arbeitszimmer_fenster_rechts'',''on'')
        or is_state(''binary_sensor.arbeitszimmer_fenster_links'',''on'') -%} Arbeitszimmer
        {% endif %}'
    service: notify.alexa_media_schlafzimmer
  - data: {}
    entity_id: input_boolean.open_windows_info_given
    service: input_boolean.turn_on
  initial_state: true
  mode: single
- id: 3def337534d3a50762278261b050cdbf
  alias: send critical message if any window is open on door open (Floor Window Check)
  trigger:
  - entity_id: binary_sensor.floor_door_sensor
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: switch.floor_main_switch_switch
    state: 'on'
  - condition: template
    value_template: '{{ states("sensor.window_open_check") | int > 0 }}'
  - condition: state
    entity_id: input_boolean.sleepmode
    state: 'off'
  action:
  - data_template:
      variables:
        message: 'Es sind noch Fenster in folgenden Räumen offen: {%- if is_state(''binary_sensor.bathroom_window_manualy'',''on'')
          -%} Badezimmer {% endif %} {%- if is_state(''binary_sensor.bedroom_window_sensor_right'',''on'')
          or is_state(''binary_sensor.schlafzimmer_fenster_links'',''on'') -%} Schlafzimmer
          {% endif %} {%- if is_state(''binary_sensor.kitchen_window_sensor_right'',''on'')
          or is_state(''binary_sensor.kuchen_fenster_links'',''on'') -%} Küche {%
          endif%} {%- if is_state(''binary_sensor.kiving_window_sensor_right'',''on'')
          or is_state(''binary_sensor.wohnzimmerzimmer_fenster_links'',''on'') -%}
          Wohnzimmer {% endif %} {%- if is_state(''binary_sensor.balkon_fenster_rechts'',''on'')
          or is_state(''binary_sensor.balkon_fenster_links'',''on'') -%} Balkon {%
          endif %} {%- if is_state(''binary_sensor.arbeitszimmer_fenster_rechts'',''on'')
          or is_state(''binary_sensor.arbeitszimmer_fenster_links'',''on'') -%} Arbeitszimmer
          {% endif %}'
        title: '{{ states("sensor.window_open_check") }} Fenster noch offen'
    entity_id: script.open_windows_message_christian
    service: script.turn_on
  - data_template:
      variables:
        message: 'Es sind noch Fenster in folgenden Räumen offen: {%- if is_state(''binary_sensor.bathroom_window_manualy'',''on'')
          -%} Badezimmer {% endif %} {%- if is_state(''binary_sensor.bedroom_window_sensor_right'',''on'')
          or is_state(''binary_sensor.schlafzimmer_fenster_links'',''on'') -%} Schlafzimmer
          {% endif %} {%- if is_state(''binary_sensor.kitchen_window_sensor_right'',''on'')
          or is_state(''binary_sensor.kuchen_fenster_links'',''on'') -%} Küche {%
          endif%} {%- if is_state(''binary_sensor.kiving_window_sensor_right'',''on'')
          or is_state(''binary_sensor.wohnzimmerzimmer_fenster_links'',''on'') -%}
          Wohnzimmer {% endif %} {%- if is_state(''binary_sensor.balkon_fenster_rechts'',''on'')
          or is_state(''binary_sensor.balkon_fenster_links'',''on'') -%} Balkon {%
          endif %} {%- if is_state(''binary_sensor.arbeitszimmer_fenster_rechts'',''on'')
          or is_state(''binary_sensor.arbeitszimmer_fenster_links'',''on'') -%} Arbeitszimmer
          {% endif %}'
        title: '{{ states("sensor.window_open_check") }} Fenster noch offen'
    entity_id: script.open_windows_message_elitsa
    service: script.turn_on
  - service: script.popup_floor_show_windows_open
    data: {}
  initial_state: true
  mode: single
- id: 2f0a0852bfcdd52ff539ebb8e8c37ef8
  alias: Server started - start shutdown timer (Kitchen SkyNas)
  trigger:
  - platform: state
    entity_id: switch.skynas
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: input_boolean.server_shutdown_overwrite
    from: 'on'
    to: 'off'
  condition:
  - condition: numeric_state
    entity_id: sensor.show_plex_activity
    below: 1
  - condition: state
    entity_id: input_boolean.server_shutdown_overwrite
    state: 'off'
  action:
  - service: script.turn_on
    entity_id: script.shutdown_server
- id: '1587038210382'
  alias: update sleepmode (Bedroom Sleepmode)
  description: ''
  trigger:
  - entity_id: group.living_all
    platform: state
    to: 'off'
  - entity_id: group.kitchen_all
    platform: state
    to: 'off'
  - entity_id: group.bedroom_all
    platform: state
    to: 'off'
  - entity_id: group.floor_light
    platform: state
    to: 'off'
  - entity_id: group.workingroom_all
    platform: state
    to: 'off'
  - entity_id: group.bathroom_all
    platform: state
    to: 'off'
  - entity_id: input_boolean.someone_in_kitchen
    platform: state
    to: 'off'
  - entity_id: input_boolean.someone_in_living
    platform: state
    to: 'off'
  - entity_id: input_boolean.someone_in_bathroom
    platform: state
    to: 'off'
  - entity_id: input_boolean.someone_in_workingroom
    platform: state
    to: 'off'
  - entity_id: input_boolean.someone_in_bedroom
    platform: state
    to: 'off'
  - entity_id: input_boolean.someone_in_guestroom
    platform: state
    to: 'off'
  condition:
  - above: '1'
    condition: numeric_state
    entity_id: sensor.rooms_with_sleepmode_active
  - condition: state
    entity_id: input_boolean.nickerchen_aktiv
    state: 'off'
  action:
  - data: {}
    entity_id: script.alexa_good_night
    service: script.turn_on
  mode: single
- id: 935733951c519bc95b42a176a8d0bdd2
  alias: Waschmaschine ausgeschaltet (Kitchen Washing Machine)
  trigger:
  - below: '0.5'
    entity_id: sensor.washing_power
    for: 00:05:00
    platform: numeric_state
  - platform: state
    entity_id: switch.washing_switch
    to: 'off'
  action:
  - entity_id: input_boolean.washing_machine_switch
    service: input_boolean.turn_off
  - entity_id: input_boolean.washing_machine_running
    service: input_boolean.turn_off
  - service: input_select.select_option
    data:
      option: Kein Program gewählt
    entity_id: input_select.waschprogramme
  initial_state: true
  mode: single
- id: 41ba21910bf1863cc3e657f319b73716
  alias: Waschmaschine fertig (Kitchen Washing Machine)
  trigger:
  - above: '0.5'
    below: '2'
    entity_id: sensor.washing_power
    platform: numeric_state
    for: 00:02:00
  action:
  - entity_id: input_boolean.washing_machine_switch
    service: input_boolean.turn_on
  - entity_id: input_boolean.washing_machine_running
    service: input_boolean.turn_off
  - data:
      value: 0
    entity_id: input_number.minuten_bis_waschmaschine_fertig
    service: input_number.set_value
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.washing_timer_activate
  - service: input_select.select_option
    data:
      option: Kein Program gewählt
    entity_id: input_select.waschprogramme
  initial_state: true
  mode: single
- id: 99cfdfa0006aafef9b338b87d74e0e14
  alias: Waschmaschine läuft (Kitchen Washing Machine)
  trigger:
  - above: '5'
    entity_id: sensor.washing_power
    platform: numeric_state
  condition:
  - condition: state
    entity_id: input_boolean.washing_machine_running
    state: 'off'
  action:
  - entity_id: input_boolean.washing_machine_running
    service: input_boolean.turn_on
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.washing_timer_activate
  initial_state: true
  mode: single
- id: eecc47eb4eb1fe17bc0f70279247624d
  alias: Zwave Network Ready (General Home Assistant)
  initial_state: true
  trigger:
  - platform: event
    event_type: zwave.network_ready
  action:
  - service: notify.devices_christian
    data:
      message: Z-Wave Network Ready
- id: '1597674322744'
  alias: Licht in Abstellraum
  description: ''
  trigger:
  - entity_id: binary_sensor.hauswirtschaftsraum_tur
    platform: state
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.hauswirtschaftsraum_tur
        state: 'on'
      sequence:
      - data: {}
        entity_id: light.deckenlicht
        service: light.turn_on
    - conditions:
      - condition: state
        entity_id: binary_sensor.hauswirtschaftsraum_tur
        state: 'off'
      sequence:
      - data: {}
        entity_id: light.deckenlicht
        service: light.turn_off
    default: []
  mode: single
- id: '1597674554816'
  alias: Open Balcony Rollo when open window
  description: ''
  trigger:
  - entity_id: binary_sensor.balkon_fenster_links
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: cover.balcony_roller_shutter_level
    service: cover.open_cover
  mode: single
- id: '1597674680949'
  alias: someone in bathroom - on
  description: ''
  trigger:
  - entity_id: binary_sensor.bathroom_multi_sensor_sensor
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bathroom_door_manualy
    platform: state
    to: 'on'
  - entity_id: binary_sensor.badezimmer_dusche_motion
    platform: state
    to: 'on'
  - entity_id: switch.bathroom_main_light_switch
    platform: state
    to: 'on'
  - entity_id: switch.bathroom_shower_light_switch
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_occupied_bathroom
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_light_off_bathroom
    platform: state
    to: 'on'
  - platform: state
    entity_id: binary_sensor.badezimmer_motion
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: script.someone_in_bathroom_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_bathroom
    service: input_boolean.turn_on
  mode: single
- id: '1597674771305'
  alias: someone in bathroom - off
  description: ''
  trigger:
  - entity_id: binary_sensor.bathroom_multi_sensor_sensor
    platform: state
    to: 'off'
  - entity_id: binary_sensor.badezimmer_dusche_motion
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_occupied_bathroom
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_light_off_bathroom
    platform: state
    to: 'off'
  - platform: state
    entity_id: binary_sensor.badezimmer_motion
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_bedroom
    to: 'on'
    for: 00:00:30
  condition:
  - condition: state
    entity_id: binary_sensor.bathroom_multi_sensor_sensor
    state: 'off'
  - condition: state
    entity_id: binary_sensor.badezimmer_dusche_motion
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_occupied_bathroom
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_light_off_bathroom
    state: 'off'
  - condition: state
    entity_id: binary_sensor.badezimmer_motion
    state: 'off'
  action:
  - data: {}
    entity_id: script.someone_in_bathroom_off
    service: script.turn_on
  mode: single
- id: '1597674973476'
  alias: someone in bathroom - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_bathroom
    platform: state
  - entity_id: input_boolean.force_occupied_bathroom
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_light_off_bathroom
    platform: state
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_bathroom
        state: 'on'
      - below: '100'
        condition: numeric_state
        entity_id: sensor.bathroom_multi_sensor_luminance
      - condition: state
        entity_id: input_boolean.sleepmode_bathroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_bathroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_occupied_bathroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.bathroom_main_light_switch
        service: switch.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_bathroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_occupied_bathroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.bathroom_light
        service: homeassistant.turn_off
      - data: {}
        entity_id: light.golight
        service: light.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.sleepmode_bathroom
        state: 'on'
      sequence:
      - data:
          brightness: 20
          color_temp: 500
        entity_id: light.golight
        service: light.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.force_occupied_bathroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.someone_in_bathroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_light_off_bathroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.bathroom_main_light_switch
        service: switch.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_bathroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_occupied_bathroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.bathroom_main_light_switch
        service: switch.turn_off
    default: []
  mode: single
- id: '1597675027902'
  alias: someone in bathroom shower - light
  description: ''
  trigger:
  - entity_id: binary_sensor.badezimmer_dusche_motion
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.sleepmode_bathroom
    state: 'off'
  action:
  - data: {}
    entity_id: switch.bathroom_shower_light_switch
    service: switch.turn_on
  mode: single
- id: bddd3547f9ee55a54c97a67f5bb78b55
  alias: someone in bedroom - on
  description: ''
  trigger:
  - entity_id: binary_sensor.bedroom_multi_sensor_sensor
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bedroom_door_manualy
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bett_christian
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bett_elitsa
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_occupied_bedroom
    platform: state
    to: 'on'
  - entity_id: switch.bedroom_main_light_switch
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_light_off_bedroom
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: script.someone_in_bedroom_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_bedroom
    service: input_boolean.turn_on
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.rollo_automatik_schlafzimmer
  mode: single
- id: 2884be34bae55abcb7685010b06e0507
  alias: someone in bedroom - off
  description: ''
  trigger:
  - entity_id: binary_sensor.bedroom_multi_sensor_sensor
    platform: state
    to: 'off'
  - entity_id: binary_sensor.bett_christian
    platform: state
    to: 'off'
  - entity_id: binary_sensor.bett_elitsa
    platform: state
    to: 'off'
  - entity_id: input_boolean.sleepmode_bedroom
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_light_off_bedroom
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_occupied_bedroom
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: binary_sensor.bedroom_multi_sensor_sensor
    state: 'off'
  - condition: state
    entity_id: binary_sensor.bett_christian
    state: 'off'
  - condition: state
    entity_id: binary_sensor.bett_elitsa
    state: 'off'
  - condition: state
    entity_id: switch.bedroom_tv_switch_switch
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_occupied_bedroom
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_light_off_bedroom
    state: 'off'
  - condition: state
    entity_id: input_boolean.nickerchen_aktiv
    state: 'off'
  action:
  - data: {}
    entity_id: script.someone_in_bedroom_off
    service: script.turn_on
  mode: single
- id: 7af765fa696f6acaaa2db55a4a7ef95c
  alias: someone in bedroom - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_bedroom
    platform: state
  - entity_id: input_boolean.force_light_off_bedroom
    platform: state
  - entity_id: input_boolean.force_occupied_bedroom
    platform: state
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_bedroom
        state: 'on'
      - below: '60'
        condition: numeric_state
        entity_id: sensor.bedroom_multi_sensor_luminance
      - condition: state
        entity_id: input_boolean.sleepmode_bedroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_bedroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.bedroom_main_light_switch
        service: switch.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_bedroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_occupied_bedroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.bedroom_light
        service: homeassistant.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_bedroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_occupied_bedroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.bedroom_light
        service: homeassistant.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_bedroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_occupied_bedroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.someone_in_bedroom
        state: 'on'
      sequence:
      - data: {}
        entity_id: group.bedroom_light
        service: homeassistant.turn_on
    default: []
  mode: single
- id: 1035a3fdbae48f7fb8fe1e6c5d273c22
  alias: someone in kitchen - on
  description: ''
  trigger:
  - entity_id: binary_sensor.kitchen_multi_sensor_sensor
    platform: state
    to: 'on'
  - entity_id: binary_sensor.kuche_secondary_motion
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_occupied_kitchen
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_light_off_kitchen
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: script.someone_in_kitchen_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_kitchen
    service: input_boolean.turn_on
  mode: single
- id: c501c1da8b1c48f223d0420eeaedf33b
  alias: someone in kitchen - off
  description: ''
  trigger:
  - entity_id: binary_sensor.kitchen_multi_sensor_sensor
    platform: state
    to: 'off'
  - entity_id: binary_sensor.kuche_secondary_motion
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_light_off_kitchen
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_occupied_kitchen
    platform: state
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_bedroom
    to: 'on'
    for: 00:00:30
  condition:
  - condition: state
    entity_id: binary_sensor.kuche_secondary_motion
    state: 'off'
  - condition: state
    entity_id: binary_sensor.kitchen_multi_sensor_sensor
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_occupied_kitchen
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_light_off_kitchen
    state: 'off'
  action:
  - data: {}
    entity_id: script.someone_in_kitchen_off
    service: script.turn_on
  mode: single
- id: e328a9ab294b5672843999815c75eb84
  alias: someone in kitchen - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_kitchen
    platform: state
  - entity_id: input_boolean.force_light_off_kitchen
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_occupied_kitchen
    platform: state
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_kitchen
        state: 'on'
      - below: '80'
        condition: numeric_state
        entity_id: sensor.kitchen_multi_sensor_luminance
      - condition: state
        entity_id: input_boolean.sleepmode_kitchen
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_kitchen
        state: 'off'
      - condition: state
        entity_id: switch.living_beamer_switch
        state: 'off'
      - condition: state
        entity_id: switch.wohnzimmer_entertainment
        state: 'off'
      - condition: state
        entity_id: input_boolean.nickerchen_wohnzimmer
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.kitchen_main_light_switch
        service: switch.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_kitchen
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_occupied_kitchen
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_kitchen
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.kitchen_light
        service: homeassistant.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.force_occupied_kitchen
        state: 'on'
      - condition: state
        entity_id: input_boolean.someone_in_kitchen
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_light_off_kitchen
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.kitchen_light
        service: homeassistant.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_kitchen
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_occupied_kitchen
        state: 'off'
      - condition: state
        entity_id: input_boolean.someone_in_kitchen
        state: 'on'
      sequence:
      - data: {}
        entity_id: group.kitchen_light
        service: homeassistant.turn_off
    default: []
  mode: single
- id: 744e8e5f822335b4e8bdbd5be053f1d1
  alias: someone in storageroom - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_storageroom
    platform: state
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_storageroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode
        state: 'off'
      sequence:
      - data:
          brightness: 255
        entity_id: light.deckenlicht
        service: light.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_storageroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: light.deckenlicht
        service: light.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_storageroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness: 50
        entity_id: light.abstellraum
    default: []
  mode: single
- id: 7ad6741fec41393dda5ab51cd80459f0
  alias: someone in floor - on
  description: ''
  trigger:
  - entity_id: binary_sensor.floor_multi_sensor_sensor
    platform: state
    to: 'on'
  - entity_id: switch.floor_main_switch_switch
    platform: state
    to: 'on'
  - platform: state
    entity_id: ' binary_sensor.floor_door_sensor'
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: script.someone_in_floor_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_floor
    service: input_boolean.turn_on
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.someone_in_large_floor
  mode: single
- id: 8f208c671af6a918798b5f87973410b2
  alias: someone in floor - off
  description: ''
  trigger:
  - entity_id: binary_sensor.floor_multi_sensor_sensor
    platform: state
    to: 'off'
  - platform: state
    entity_id: switch.floor_main_switch_switch
    to: 'on'
  - platform: state
    entity_id: input_boolean.yoga
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_bedroom
    to: 'on'
    for: 00:00:30
  condition: []
  action:
  - data: {}
    entity_id: script.someone_in_floor_off
    service: script.turn_on
  mode: single
- id: c1403a8d72ca9cc2f9492404bfab9da0
  alias: someone in floor - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_floor
    platform: state
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_floor
        state: 'on'
      - condition: numeric_state
        entity_id: sensor.floor_multi_sensor_luminance
        below: '60'
      - condition: state
        entity_id: input_boolean.sleepmode_floor
        state: 'off'
      - condition: state
        entity_id: switch.wohnzimmer_entertainment
        state: 'off'
      - condition: state
        entity_id: input_boolean.nickerchen_wohnzimmer
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.floor_light
        service: homeassistant.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_floor
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.floor_main_switch_switch
        service: switch.turn_off
    default: []
  mode: single
- id: 178a3df0cc133cf6551250a07b793225
  alias: someone in living - on
  description: ''
  trigger:
  - entity_id: binary_sensor.living_multi_sensor_sensor
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_occupied_living
    from: 'off'
    platform: state
    to: 'on'
  - entity_id: switch.living_main_light_switch
    from: 'off'
    platform: state
    to: 'on'
  - entity_id: switch.wohnzimmer_entertainment
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: switch.wohnzimmer_entertainment
    state: 'off'
  action:
  - data: {}
    entity_id: script.someone_in_living_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_living
    service: input_boolean.turn_on
  mode: single
- id: 9963e4a555aa6d92a5170a299d184274
  alias: someone in living - off
  description: ''
  trigger:
  - entity_id: binary_sensor.living_multi_sensor_sensor
    platform: state
    to: 'off'
  - entity_id: switch.wohnzimmer_entertainment
    platform: state
    to: 'off'
  - entity_id: switch.living_beamer_switch
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_occupied_living
    from: 'on'
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_light_off_living
    platform: state
    to: 'off'
  - platform: state
    entity_id: switch.living_main_light_switch
    to: 'on'
  - platform: state
    entity_id: input_boolean.sleepmode_bedroom
    to: 'on'
    for: 00:00:30
  condition:
  - condition: state
    entity_id: switch.wohnzimmer_entertainment
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_occupied_living
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_light_off_living
    state: 'off'
  action:
  - data: {}
    entity_id: script.someone_in_living_off
    service: script.turn_on
  mode: single
- id: 25d71fbef514b33891cc5ffa80e662d2
  alias: someone in living - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_living
    platform: state
  - platform: state
    entity_id: input_boolean.force_light_off_living
    to: 'on'
  - platform: state
    entity_id: input_boolean.force_occupied_living
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_living
        state: 'on'
      - below: '80'
        condition: numeric_state
        entity_id: sensor.living_multi_sensor_luminance
      - condition: state
        entity_id: input_boolean.sleepmode_living
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_living
        state: 'off'
      - condition: state
        entity_id: input_boolean.nickerchen_wohnzimmer
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.living_light
        service: homeassistant.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_living
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_occupied_living
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.living_light
        service: homeassistant.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.force_occupied_living
        state: 'on'
      - condition: state
        entity_id: input_boolean.someone_in_living
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_light_off_living
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.living_light
        service: homeassistant.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_living
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_occupied_living
        state: 'off'
      - condition: state
        entity_id: input_boolean.someone_in_living
        state: 'on'
      sequence:
      - data: {}
        entity_id: group.living_light
        service: homeassistant.turn_off
    default: []
  mode: single
- id: 16a92940cc6819bb9c3c7f8c8df7e8c7
  alias: someone in workingroom - on
  description: ''
  trigger:
  - entity_id: binary_sensor.workingroom_multi_sensor_sensor
    platform: state
    to: 'on'
  - entity_id: binary_sensor.arbeitszimmer_tur
    platform: state
    to: 'on'
    for: 00:00:03
  - entity_id: input_boolean.force_occupied_workingroom
    platform: state
    to: 'on'
  - entity_id: switch.workingroom_light_switch
    platform: state
    to: 'on'
  - entity_id: switch.arbeitszimmer_tv_relay
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_light_off_workingroom
    platform: state
    to: 'on'
  - platform: state
    entity_id: input_boolean.home_office
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: script.someone_in_workingroom_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_workingroom
    service: input_boolean.turn_on
  mode: single
- id: 4a2c80d45b10f75ac2df241ebeccb9f7
  alias: someone in workingroom - off
  description: ''
  trigger:
  - entity_id: binary_sensor.workingroom_multi_sensor_sensor
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_light_off_workingroom
    platform: state
    to: 'off'
  - entity_id: input_boolean.force_occupied_workingroom
    platform: state
    to: 'off'
  - platform: state
    entity_id: sensor.scene_check_xbox
    to: 'false'
  - platform: state
    entity_id: input_boolean.home_office
    to: 'off'
    from: 'on'
  - platform: state
    entity_id: binary_sensor.arbeitszimmer_tur
    for: 00:00:10
  - platform: state
    entity_id: switch.arbeitszimmer_tv_relay
    to: 'off'
  - platform: state
    entity_id: group.workingroom_light
    to: 'on'
  - platform: state
    entity_id: input_boolean.sleepmode_bedroom
    to: 'on'
    for: 00:00:30
  condition:
  - condition: state
    entity_id: sensor.scene_check_xbox
    state: 'false'
  - condition: state
    entity_id: binary_sensor.ping_xbox_one_x
    state: 'off'
  - condition: state
    entity_id: sensor.samsung_tv_living_visible
    state: 'OFF'
  - condition: state
    entity_id: input_boolean.home_office
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_occupied_workingroom
    state: 'off'
  - condition: state
    entity_id: input_boolean.force_light_off_workingroom
    state: 'off'
  - condition: state
    entity_id: binary_sensor.workingroom_multi_sensor_sensor
    state: 'off'
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.christians_macbook_pro_2_facetime_hd_camera_built_in
      state: 'off'
    - condition: state
      entity_id: binary_sensor.christians_macbook_pro_2_facetime_hd_camera_built_in
      state: unknown
  action:
  - data: {}
    entity_id: script.someone_in_workingroom_off
    service: script.turn_on
  mode: single
- id: 0f86e17fc2a7820162f1b5a22a9471f6
  alias: someone in workingroom - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_workingroom
    platform: state
  - entity_id: input_boolean.force_light_off_workingroom
    platform: state
    to: 'on'
  - entity_id: input_boolean.force_occupied_workingroom
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: sensor.scene_check_xbox
    state: 'false'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'on'
      - below: '50'
        condition: numeric_state
        entity_id: sensor.workingroom_multi_sensor_luminance
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_workingroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.workingroom_light
        service: homeassistant.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_workingroom
        state: 'off'
      sequence:
      - service: light.turn_on
        data:
          brightness: 255
        entity_id: light.stehlicht
      - data: {}
        entity_id: group.workingroom_light
        service: homeassistant.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_workingroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.force_occupied_workingroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.workingroom_light
        service: homeassistant.turn_off
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_workingroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_occupied_workingroom
        state: 'on'
      sequence:
      - data: {}
        entity_id: group.workingroom_light
        service: homeassistant.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          brightness: 51
        entity_id: light.stehlicht
    default: []
  mode: single
- id: '1597677772570'
  alias: Zeit für ein Nickerchen abfragen
  description: ''
  trigger:
  - entity_id: binary_sensor.bett_christian
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bett_elitsa
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bedroom_multi_sensor_sensor
    platform: state
    to: 'on'
  - entity_id: switch.bedroom_tv_switch_switch
    platform: state
    to: 'on'
  condition:
  - after: '14:00:00'
    before: '19:00:00'
    condition: time
  - condition: state
    entity_id: binary_sensor.bedroom_door_manualy
    state: 'on'
  - condition: state
    entity_id: input_boolean.sleepmode_bedroom
    state: 'off'
  - condition: state
    entity_id: input_boolean.nickerchen_angeboten
    state: 'off'
  - condition: state
    entity_id: person.elitsa
    state: home
  action:
  - data:
      data:
        type: announce
      message: Möchtest du ein Nickerchen machen? Dann sag "Alexa, ich mache ein Nickerchen".
        Dann schalte ich das Schlafzimmer auf Bitte nicht stören
    service: notify.alexa_media_schlafzimmer
  - data:
      entity_id: input_boolean.nickerchen_angeboten
    service: input_boolean.turn_on
  - delay: '[object Object]'
  - data:
      entity_id: input_boolean.nickerchen_angeboten
    service: input_boolean.turn_off
  mode: single
- id: '1597678164853'
  alias: Rollos Hoch 100%
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.rollo_stand
    to: Offen
  - platform: state
    entity_id: input_boolean.sleepmode_kitchen
    to: 'off'
    for: 00:00:02
  - platform: state
    entity_id: input_boolean.sleepmode_living
    to: 'off'
    for: 00:00:02
  - platform: state
    entity_id: input_boolean.sleepmode_bathroom
    to: 'off'
    for: 00:00:02
  - platform: state
    entity_id: input_boolean.sleepmode_workingroom
    to: 'off'
    for: 00:00:02
  - platform: state
    entity_id: input_boolean.sleepmode_bedroom
    to: 'off'
    for: 00:00:02
  - platform: sun
    event: sunrise
    offset: 00:45:00
  - platform: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    to: 'off'
    for: 00:00:02
  - platform: state
    entity_id: input_boolean.rollo_automatik_kueche
    to: 'on'
  - platform: state
    entity_id: input_boolean.rollo_automatik_wohnzimmer
    to: 'on'
  - platform: state
    entity_id: input_boolean.rollo_automatik_balkon
    to: 'on'
  - platform: state
    entity_id: input_boolean.nickerchen_aktiv
    to: 'off'
    for: 00:00:02
  condition:
  - condition: state
    entity_id: input_select.rollo_stand
    state: Offen
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: switch.wohnzimmer_entertainment
        state: 'off'
      - condition: state
        entity_id: input_boolean.rollo_automatik_wohnzimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_living
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.wohnzimmer_rollo_hoch
        service: script.turn_on
      - data: {}
        entity_id: script.balkon_rollo_hoch
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_badezimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_bathroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.badezimmer_rollo_hoch
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_arbeitszimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.arbeitszimmer_rollo_hoch
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_schlafzimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_bedroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.schlafzimmer_rollo_hoch
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_kueche
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_kitchen
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.kueche_rollo_hoch
        service: script.turn_on
    default: []
  - condition: state
    entity_id: group.rollo_automatik
    state: 'on'
  - data:
      option: Offen
    entity_id: input_select.rollo_stand
    service: input_select.select_option
  mode: single
- id: 9aee890055d442c3b4ee789b029af31c
  alias: Rollos Hoch 50% wenn zu warm
  description: ''
  trigger:
  - entity_id: input_select.rollo_stand
    platform: state
    to: Sonnenschutz
  - platform: state
    entity_id: input_boolean.sleepmode_kitchen
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_living
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_bathroom
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_workingroom
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_bedroom
    to: 'off'
  - platform: sun
    event: sunrise
    offset: 00:45:00
  - platform: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    to: 'off'
    for: 00:00:02
  - platform: state
    entity_id: input_boolean.nickerchen_aktiv
    to: 'off'
    for: 00:00:02
  - platform: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    to: 'off'
    for: 00:00:02
  condition:
  - condition: state
    entity_id: input_select.rollo_stand
    state: Sonnenschutz
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: switch.wohnzimmer_entertainment
        state: 'off'
      - condition: state
        entity_id: input_boolean.rollo_automatik_wohnzimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_living
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.wohnzimmer_rollo_50
        service: script.turn_on
      - data: {}
        entity_id: script.balkon_rollo_50
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_badezimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_bathroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.badezimmer_rollo_50
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_arbeitszimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.arbeitszimmer_rollo_50
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_schlafzimmer
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_bedroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.someone_in_bedroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.schlafzimmer_rollo_50
        service: script.turn_on
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_kueche
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_kitchen
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.kueche_rollo_50
        service: script.turn_on
    default: []
  mode: single
- id: 9fc10d93aac4e0fb65065636db9975cd
  alias: Rollos runter wenn 30 Minuten nach Sonnenuntergang oder Schlafmodus an
  description: ''
  trigger:
  - entity_id: input_boolean.sleepmode
    platform: state
    to: 'on'
  - event: sunset
    offset: 00:30:00
    platform: sun
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.window_kitchen_open_check
        state: geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.kueche_rollo_runter
    - conditions:
      - condition: state
        entity_id: sensor.window_kitchen_open_check
        state: offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.kueche_rollo_50
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.balkon_fenster_links
        state: 'off'
      sequence:
      - data: {}
        entity_id: script.balkon_rollo_runter
        service: script.turn_on
    default: []
  - data: {}
    entity_id: script.wohnzimmer_rollo_runter
    service: script.turn_on
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.window_bathroom_open_check
        state: geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.badezimmer_rollo_runter
    - conditions:
      - condition: state
        entity_id: sensor.window_bathroom_open_check
        state: offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.badezimmer_rollo_50
    default: []
  - data: {}
    entity_id: script.arbeitszimmer_rollo_runter
    service: script.turn_on
  - data: {}
    entity_id: script.schlafzimmer_rollo_runter
    service: script.turn_on
  - data:
      option: Geschlossen
    entity_id: input_select.rollo_stand
    service: input_select.select_option
  mode: single
- id: '1597679640824'
  alias: Schalte Schlafmodus aus
  description: ''
  trigger:
  - entity_id: input_boolean.sleepmode
    platform: state
    to: 'off'
  - entity_id: group.sleepmode
    platform: state
    to: 'off'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: input_boolean.sleepmode
      state: 'on'
    - condition: or
      conditions:
      - condition: state
        entity_id: group.sleepmode
        state: 'on'
  action:
  - data: {}
    entity_id: group.rollo_automatik
    service: homeassistant.turn_on
  - delay:
      seconds: 2
  - data: {}
    entity_id: input_boolean.rollo_wakeup_mode
    service: input_boolean.turn_off
  - data: {}
    entity_id: group.sleepmode
    service: homeassistant.turn_off
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.home_office
        state: 'off'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.silent_messages_only
    default: []
  - data: {}
    entity_id: input_boolean.open_windows_info_given
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.sleepmode
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.zeit_fur_ein_update
    service: input_boolean.turn_off
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.nickerchen_angeboten
  - service: frontend.set_theme
    data:
      name: light_extra
  mode: single
- id: 5928c80ea7e4249f40254e0e1790c30a
  alias: Schalte Schlafmodus aus - ausser Schlafzimmer
  description: ''
  trigger:
  - entity_id: group.sleepmode_all_but_bedroom
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data: {}
    entity_id: group.rollo_automatik_not_bedroom
    service: homeassistant.turn_on
  - delay:
      seconds: 2
  - service: homeassistant.turn_off
    data: {}
    entity_id: group.sleepmode_all_but_bedroom
  mode: single
- id: '1597683549739'
  alias: Warnung Klimaanlage Kanister voll
  description: ''
  trigger:
  - entity_id: binary_sensor.klimaanlage_wassertank
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: switch.aircondition_relay
    service: switch.turn_off
  - data:
      message: Auffangbehälter Klimaanlage ist voll, ich schalte die Klimaanlage zur
        Sicherheit aus. BItte Behälter entleeren
    service: notify.send_to_input_text
  mode: single
- id: '1597683654746'
  alias: Waschküche Wasser erkannt
  description: ''
  trigger:
  - entity_id: binary_sensor.waschkuche_wassersensor
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: switch.fibaro_system_fgwpef_wall_plug_gen5_switch_2
    service: switch.turn_off
  - data:
      message: Wasser bei Waschmadchine entdeckt, schalte Waschmaschine zur Sicherheit
        aus. Bitte dringend überprüfen!
    service: notify.send_to_input_text
  mode: single
- id: '1597683794449'
  alias: Xbox aus dann xbox Power aus
  description: ''
  trigger:
  - entity_id: binary_sensor.ping_xbox_series_x
    platform: state
    to: 'off'
  - entity_id: binary_sensor.ping_xbox_one_x
    platform: state
    to: 'off'
  - platform: state
    entity_id: media_player.dream_box
    to: 'off'
  condition:
  - condition: state
    entity_id: binary_sensor.ping_nintendo_switch
    state: 'off'
  - condition: state
    entity_id: input_boolean.zeit_fur_ein_update
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: media_player.dream_box
          state: 'off'
        - condition: state
          entity_id: binary_sensor.ping_xbox_series_x
          state: 'off'
      sequence:
      - data: {}
        entity_id: switch.workingroom_xbox_switch_switch
        service: switch.turn_off
    - conditions:
      - condition: state
        entity_id: binary_sensor.ping_xbox_one_x
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.xbox_2_relay
        service: switch.turn_off
    default: []
  mode: single
- id: '1597683915682'
  alias: Konsolen aus dann Arbeitszimmer TV aus
  description: ''
  trigger:
  - entity_id: binary_sensor.ping_xbox_series_x
    platform: state
    to: 'off'
  - entity_id: binary_sensor.ping_nintendo_switch
    platform: state
    to: 'off'
  - platform: state
    entity_id: media_player.dream_box
    to: 'off'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: media_player.dream_box
      state: 'off'
    - condition: state
      entity_id: binary_sensor.ping_xbox_series_x
      state: 'off'
  - condition: state
    entity_id: binary_sensor.ping_nintendo_switch
    state: 'off'
  action:
  - data: {}
    entity_id: switch.arbeitszimmer_tv_relay
    service: switch.turn_off
  mode: single
- id: '1597684084056'
  alias: Wohnzimmer TV auf standby dann strom aus
  description: ''
  trigger:
  - entity_id: binary_sensor.ping_wohnzimmer_tv
    for: 00:00:60
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: switch.living_beamer_switch
    state: 'off'
  - condition: state
    entity_id: input_boolean.zeit_fur_ein_update
    state: 'off'
  action:
  - data: {}
    entity_id: switch.wohnzimmer_entertainment
    service: switch.turn_off
  mode: single
- id: '1597693041919'
  alias: Schalte Schlafmodus komplett ein
  description: ''
  trigger:
  - entity_id: input_boolean.sleepmode
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.silent_messages_only
    service: input_boolean.turn_on
  - data: {}
    entity_id: group.rollo_automatik
    service: homeassistant.turn_off
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_kitchen
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.kitchen_light
        service: homeassistant.turn_off
      - service: light.turn_off
        data: {}
        entity_id: light.kuchen_lightstrip
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_living
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.living_light
        service: homeassistant.turn_off
      - service: light.turn_off
        data: {}
        entity_id: light.wohnzimmer_couchlicht
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_floor
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.floor_light
        service: homeassistant.turn_off
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_guestroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.guestroom_light
        service: homeassistant.turn_off
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_bathroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.bathroom_light
        service: homeassistant.turn_off
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: group.workingroom_light
        service: homeassistant.turn_off
      - service: light.turn_off
        data: {}
        entity_id: light.arbeitszimmer_tv_licht
    default: []
  - data: {}
    entity_id: group.bedroom_light
    service: homeassistant.turn_off
  - data: {}
    entity_id: input_boolean.rollo_wakeup_mode
    service: input_boolean.turn_on
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.lightstrip_random_color
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.zeit_fur_ein_update
  - service: switch.turn_off
    data: {}
    entity_id: switch.workingroom_xbox_switch_switch
  mode: single
- id: '1597693524453'
  alias: Close Balcony while sleepmode active
  description: ''
  trigger:
  - entity_id: binary_sensor.balkon_fenster_links
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.sleepmode
    state: 'on'
  action:
  - data: {}
    entity_id: script.balkon_rollo_runter
    service: script.turn_on
  mode: single
- id: '1597695737685'
  alias: Xbox Szene aktiv licht anpassen
  description: ''
  trigger:
  - entity_id: sensor.scene_check_xbox
    platform: state
    for: 00:00:30
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.workingroom_multi_sensor_luminance
        below: '80'
      - condition: state
        entity_id: sensor.scene_check_xbox
        state: 'true'
      sequence:
      - data: {}
        entity_id: switch.workingroom_light_switch
        service: switch.turn_off
      - data:
          brightness: 130
        entity_id: light.stehlicht
        service: light.turn_on
      - service: light.turn_on
        data:
          brightness: 255
          rgb_color:
          - '0'
          - '255'
          - '0'
        entity_id: light.arbeitszimmer_tv_licht
    - conditions:
      - condition: state
        entity_id: sensor.scene_check_xbox
        state: 'false'
      - below: '80'
        condition: numeric_state
        entity_id: sensor.workingroom_multi_sensor_luminance
      sequence:
      - data:
          brightness: 255
        entity_id: light.stehlicht
        service: light.turn_on
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.lightstrip_random_color
      - delay:
          seconds: 1
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.lightstrip_random_color
    - conditions:
      - condition: numeric_state
        entity_id: sensor.workingroom_multi_sensor_luminance
        above: '80'
      - condition: state
        entity_id: sensor.scene_check_xbox
        state: 'true'
      sequence:
      - service: homeassistant.turn_off
        data: {}
        entity_id: group.workingroom_light
      - service: light.turn_on
        data:
          brightness: 255
          rgb_color:
          - '0'
          - '255'
          - '0'
        entity_id: light.arbeitszimmer_tv_licht
    default: []
  mode: single
- id: '1597746022003'
  alias: Schlafzimmer Bettlicht
  description: ''
  trigger:
  - entity_id: binary_sensor.bett_christian
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bett_elitsa
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bedroom_door_manualy
    platform: state
  condition:
  - condition: state
    entity_id: input_boolean.sleepmode_bedroom
    state: 'on'
  - condition: state
    entity_id: switch.bedroom_main_light_switch
    state: 'off'
  action:
  - data: {}
    entity_id: script.bettlicht_ausschalten
    service: script.turn_off
  - data: {}
    entity_id: script.bettlicht_ausschalten
    service: script.turn_on
  - data: {}
    entity_id: switch.bedroom_bed_light_switch
    service: switch.turn_on
  mode: single
- id: '1597765687225'
  alias: Nachtlicht Wohnzimmer
  description: ''
  trigger:
  - entity_id: binary_sensor.bedroom_door_manualy
    platform: state
    to: 'on'
  - entity_id: binary_sensor.bathroom_door_manualy
    platform: state
    to: 'on'
  - entity_id: binary_sensor.arbeitszimmer_tur
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.sleepmode_floor
    state: 'on'
  action:
  - entity_id: light.wohnzimmer_couchlicht
    service: light.turn_on
    data:
      brightness: 30
      rgb_color:
      - 255
      - 63
      - 0
  - delay:
      minutes: 1
  - data: {}
    entity_id: light.wohnzimmer_couchlicht
    service: light.turn_off
  mode: single
- id: '1597784026059'
  alias: Sleepmode complete flat
  description: Wenn ganze Wohnung schläft Nachrichten Stumm schalten
  trigger:
  - entity_id: sensor.rooms_with_sleepmode_active
    platform: state
    to: '6'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.silent_messages_only
    service: input_boolean.turn_on
  mode: single
- id: '1597825609148'
  alias: someone in guestroom - on
  description: ''
  trigger:
  - entity_id: binary_sensor.gastewc_tur
    platform: state
    to: 'on'
    for: 00:00:01
  - entity_id: switch.guest_main_light_switch
    platform: state
    to: 'on'
  - platform: state
    entity_id: binary_sensor.gastewc_motion
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.someone_in_guestroom
    state: 'off'
  action:
  - data: {}
    entity_id: script.someone_in_guestroom_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_guestroom
    service: input_boolean.turn_on
  mode: single
- id: '1597825855937'
  alias: someone in guestroom - off
  description: ''
  trigger:
  - entity_id: binary_sensor.gastewc_tur
    platform: state
    to: 'on'
    for: 00:00:01
  - entity_id: switch.guest_main_light_switch
    platform: state
    to: 'off'
  - platform: state
    entity_id: binary_sensor.gastewc_motion
    for: 00:00:05
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.someone_in_guestroom
    state: 'on'
  action:
  - data: {}
    entity_id: script.someone_in_guestroom_off
    service: script.turn_on
  mode: single
- id: '1597825957829'
  alias: someone in guestroom - light
  description: ''
  trigger:
  - entity_id: input_boolean.someone_in_guestroom
    platform: state
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_guestroom
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_guestroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.guest_main_light_switch
        service: switch.turn_on
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_guestroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: switch.guest_main_light_switch
        service: switch.turn_off
    default: []
  mode: single
- id: '1597827800449'
  alias: Close Balcony
  description: ''
  trigger:
  - entity_id: binary_sensor.balkon_fenster_links
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - data: {}
        entity_id: script.balkon_rollo_runter
        service: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - data: {}
        entity_id: script.balkon_rollo_50
        service: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - data: {}
        entity_id: script.balkon_rollo_hoch
        service: script.turn_on
    default: []
  mode: single
- id: '1597829652610'
  alias: Kino Zeit
  description: ''
  trigger:
  - entity_id: binary_sensor.living_canvas_sensor
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: switch.skynas
    service: switch.turn_on
  - data: {}
    entity_id: switch.living_main_light_switch
    service: switch.turn_off
  - data: {}
    entity_id: switch.wohnzimmer_stehlicht_schalter
    service: switch.turn_on
  - data: {}
    entity_id: script.wohnzimmer_rollo_runter
    service: script.turn_on
  - data: {}
    entity_id: script.kueche_rollo_runter
    service: script.turn_on
  - data: {}
    entity_id: script.balkon_rollo_runter
    service: script.turn_on
  - data: {}
    entity_id: input_boolean.rollo_automatik_kueche
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.rollo_automatik_wohnzimmer
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.rollo_automatik_balkon
    service: input_boolean.turn_off
  - data: {}
    entity_id: switch.living_beamer_switch
    service: switch.turn_on
  - data: {}
    entity_id: switch.wohnzimmer_entertainment
    service: switch.turn_on
  - wait_template: '{{ is_state("media_player.denon_avr_x2000", "on") }}'
  - data:
      source: Kino
    entity_id: media_player.denon_avr_x2000
    service: media_player.select_source
  - wait_template: '{{ is_state("switch.wohnzimmer_tv_relay", "on") }}'
  - data: {}
    entity_id: switch.wohnzimmer_tv_relay
    service: switch.turn_off
  - data: {}
    entity_id: input_boolean.silent_messages_only
    service: input_boolean.turn_on
  - wait_template: '{{ is_state("switch.skynas", "on") }}'
  - data: {}
    entity_id: input_boolean.server_shutdown_overwrite
    service: input_boolean.turn_on
  - service: script.turn_off
    data: {}
    entity_id: script.wohnzimmer_tv_wird_nicht_gebraucht_also_aus
  mode: single
- id: '1597868801548'
  alias: Aquarium Licht - an
  description: ''
  trigger:
  - at: input_datetime.aquarium_licht_an_ab
    platform: time
  condition: []
  action:
  - data: {}
    entity_id: switch.living_aquarium_light
    service: switch.turn_on
  mode: single
- id: dd4464156d95a6ef6e893f52832216a7
  alias: set_random_time (General Test)
  trigger:
  - at: '21:00:00'
    platform: time
  - entity_id: switch.living_aquarium_light
    platform: state
    to: 'on'
  - platform: homeassistant
    event: start
  action:
  - data_template:
      entity_id: input_number.random_minute
      value: '{{ (range(30, 59)|random) }}'
    service: input_number.set_value
  initial_state: true
  mode: single
- id: '1597870371274'
  alias: Aquarium Licht - aus
  description: ''
  trigger:
  - platform: template
    value_template: '{{is_state("sensor.time", ''22:'' ~ states(''input_number.random_minute'')|int)}}'
  condition: []
  action:
  - data: {}
    entity_id: switch.living_aquarium_light
    service: switch.turn_off
  mode: single
- id: '1597936600974'
  alias: Alle Räume schlafen
  description: ''
  trigger:
  - entity_id: sensor.rooms_with_sleepmode_active
    platform: state
    to: '7'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.sleepmode
    service: input_boolean.turn_on
  mode: single
- id: '1597996123072'
  alias: Arbeitszimmer Glotze an
  description: ''
  trigger:
  - entity_id: switch.arbeitszimmer_tv_relay
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: switch.workingroom_xbox_switch_switch
    service: switch.turn_on
  mode: single
- id: '1598000974118'
  alias: Schlafzimmer TV auf Standby dann aus
  description: ''
  trigger:
  - entity_id: binary_sensor.fire_tv_stick_schlafzimmer
    platform: state
    to: 'off'
    for: 00:02:00
  condition: []
  action:
  - data:
      entity_id: switch.bedroom_tv_switch_switch
    service: switch.turn_off
  mode: single
- id: '1598002641514'
  alias: 'Eli Arbeitsmodus Morgens '
  description: ''
  trigger:
  - entity_id: binary_sensor.bedroom_door_manualy
    platform: state
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_this_day
      state: 'on'
    - condition: state
      entity_id: input_boolean.eli_hat_dienst
      state: 'on'
  - condition: state
    entity_id: input_boolean.sleepmode
    state: 'on'
  - condition: state
    entity_id: input_boolean.eli_aufgestanden
    state: 'on'
  - after: 05:30
    before: 07:00
    condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
  action:
  - data: {}
    entity_id: input_boolean.sleepmode_bathroom
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.sleepmode_guestroom
    service: input_boolean.turn_off
  - entity_id: input_boolean.eli_aufgestanden
    service: input_boolean.turn_off
  - data: {}
    entity_id: switch.wohnzimmer_stehlicht_schalter
    service: switch.turn_on
  - data: {}
    entity_id: switch.wohnzimmer_entertainment
    service: switch.turn_on
  - wait_template: '{{ is_state("media_player.denon_avr_x2000", "on") }}'
    continue_on_timeout: true
    timeout: 00:00:59
  - data:
      volume_level: 0.25
    entity_id: media_player.denon_avr_x2000
    service: media_player.volume_set
  - data: {}
    entity_id: input_boolean.force_occupied_living
    service: input_boolean.turn_on
  - data: {}
    entity_id: switch.living_main_light_switch
    service: switch.turn_on
  - wait_template: '{{not  is_state("media_player.wohnzimmer_2", "unavailable") }}'
  - service: script.turn_on
    data: {}
    entity_id: script.morning_cast_eli
  - service: light.turn_on
    data: {}
    entity_id: light.kuchen_lightstrip
  - service: light.turn_on
    data: {}
    entity_id: light.wohnzimmer_couchlicht
  mode: single
- id: '1598002733231'
  alias: Eli zur Arbeit weg
  description: ''
  trigger:
  - entity_id: person.elitsa
    from: home
    platform: state
    to: not_home
  condition:
  - after: 05:00
    before: 07:30
    condition: time
  action:
  - data:
      volume_level: 0.45
    entity_id: media_player.denon_avr_x2000
    service: media_player.volume_set
  - data: {}
    entity_id: switch.wohnzimmer_entertainment
    service: switch.turn_off
  - data: {}
    entity_id: input_boolean.force_occupied_living
    service: input_boolean.turn_off
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.eli_hat_dienst
  - data: {}
    entity_id: input_boolean.someone_in_living
    service: input_boolean.turn_off
  - condition: state
    entity_id: input_boolean.sleepmode_bedroom
    state: 'on'
  - data: {}
    entity_id: input_boolean.sleepmode_bathroom
    service: input_boolean.turn_on
  - data: {}
    entity_id: input_boolean.sleepmode_guestroom
    service: input_boolean.turn_on
  - service: light.turn_off
    data: {}
    entity_id: light.kuchen_lightstrip
  - service: light.turn_off
    data: {}
    entity_id: light.wohnzimmer_couchlicht
  mode: single
- id: '1598128960331'
  alias: Turn Window open check back on
  description: ''
  trigger:
  - entity_id: sensor.window_open_check
    platform: state
    to: '0'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.window_open_check
    service: input_boolean.turn_on
  mode: single
- id: '1598129324265'
  alias: someone home - false
  description: ''
  trigger:
  - entity_id: sensor.someone_home
    from: 'true'
    platform: state
    to: 'false'
  condition: []
  action:
  - service: homeassistant.turn_off
    data: {}
    entity_id: group.force_occupied
  - delay:
      seconds: 2
  - service: homeassistant.turn_off
    data: {}
    entity_id: group.force_light_off
  - delay:
      seconds: 2
  - service: homeassistant.turn_off
    data: {}
    entity_id: group.tvs
  - delay:
      seconds: 2
  - data: {}
    entity_id: group.someone_in
    service: homeassistant.turn_off
  mode: single
- id: '1598129826919'
  alias: someone in storageroom - on
  description: ''
  trigger:
  - entity_id: binary_sensor.abstellkammer_motion
    platform: state
    to: 'on'
  - entity_id: binary_sensor.abstellkammer_tur
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: script.someone_in_storageroom_off
    service: script.turn_off
  - data: {}
    entity_id: input_boolean.someone_in_storageroom
    service: input_boolean.turn_on
  mode: single
- id: '1598130238483'
  alias: someone in storageroom - off
  description: ''
  trigger:
  - entity_id: binary_sensor.abstellkammer_motion
    platform: state
    to: 'off'
  - entity_id: binary_sensor.abstellkammer_tur
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: binary_sensor.abstellkammer_motion
    state: 'off'
  action:
  - data: {}
    entity_id: script.someone_in_storageroom_off
    service: script.turn_on
  mode: single
- id: '1598284546755'
  alias: hue remote - balkon rollo runter
  description: ''
  trigger:
  - event_data:
      event: 1001
      id: hue_dimmer_switch_1
    event_type: hue_event
    platform: event
  condition: []
  action:
  - data: {}
    entity_id: cover.balcony_roller_shutter_level
    service: cover.open_cover
  mode: single
- id: '1598299144966'
  alias: someone in kitchen - light manual off
  description: ''
  trigger:
  - entity_id: switch.kitchen_main_light_switch
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.force_light_off_kitchen
    state: 'off'
  action:
  - data: {}
    entity_id: input_boolean.someone_in_kitchen
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.force_occupied_kitchen
    service: input_boolean.turn_off
  mode: single
- id: 37b0740379393e658a0514fca197492a
  alias: someone in living - light manual off
  description: ''
  trigger:
  - entity_id: switch.living_main_light_switch
    platform: state
    to: 'off'
  - entity_id: group.living_all
    platform: state
  condition: []
  action:
  - delay:
      seconds: 2
  - choose:
    - conditions:
      - condition: state
        entity_id: group.living_all
        state: 'on'
      sequence:
      - data: {}
        entity_id: input_boolean.force_light_off_living
        service: input_boolean.turn_off
    - conditions:
      - condition: state
        entity_id: group.living_all
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_living
        state: 'off'
      sequence:
      - data: {}
        entity_id: input_boolean.force_occupied_living
        service: input_boolean.turn_off
    default: []
  mode: single
- id: 6153195d8d79f09835094cbabf38b2b0
  alias: someone in workingroom - light manual off
  description: ''
  trigger:
  - entity_id: switch.workingroom_light_switch
    platform: state
    to: 'off'
  - entity_id: group.workingroom_all
    platform: state
    to: 'off'
  - entity_id: light.stehlicht
    platform: state
    to: 'off'
  condition: []
  action:
  - delay:
      seconds: 2
  - choose:
    - conditions:
      - condition: state
        entity_id: group.workingroom_all
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.workingroom_light_switch
          state: 'off'
        - condition: state
          entity_id: light.stehlicht
          state: 'off'
      sequence:
      - data: {}
        entity_id: input_boolean.force_occupied_workingroom
        service: input_boolean.turn_off
    - conditions:
      - condition: state
        entity_id: group.workingroom_all
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_workingroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.home_office
        state: 'off'
      - condition: state
        entity_id: sensor.scene_check_xbox
        state: 'false'
      sequence:
      - data: {}
        entity_id: input_boolean.force_occupied_workingroom
        service: input_boolean.turn_off
      - data: {}
        entity_id: input_boolean.someone_in_workingroom
        service: input_boolean.turn_off
    default: []
  mode: single
- id: 00fc27213415311274b2c32ddf8c8f7a
  alias: someone in bedroom - light manual off
  description: ''
  trigger:
  - entity_id: group.bedroom_all
    platform: state
    to: 'off'
  - entity_id: switch.bedroom_main_light_switch
    platform: state
    to: 'off'
  condition: []
  action:
  - delay:
      seconds: 1
  - choose:
    - conditions:
      - condition: state
        entity_id: switch.bedroom_main_light_switch
        state: 'off'
      - condition: state
        entity_id: group.bedroom_all
        state: 'on'
      sequence:
      - data: {}
        entity_id: input_boolean.force_occupied_bedroom
        service: input_boolean.turn_off
    - conditions:
      - condition: state
        entity_id: switch.bedroom_main_light_switch
        state: 'off'
      - condition: state
        entity_id: group.bedroom_all
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_bedroom
        state: 'off'
      - condition: state
        entity_id: input_boolean.force_light_off_bedroom
        state: 'off'
      sequence:
      - data: {}
        entity_id: input_boolean.someone_in_bedroom
        service: input_boolean.turn_off
      - data: {}
        entity_id: input_boolean.force_occupied_bedroom
        service: input_boolean.turn_off
    default: []
  mode: single
- id: 9eea94b64221565fcbfb7cdce38eb37d
  alias: someone in bathroom - light manual off
  description: ''
  trigger:
  - entity_id: group.bathroom_light
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.force_light_off_bathroom
    state: 'off'
  action:
  - data: {}
    entity_id: input_boolean.someone_in_bathroom
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.force_occupied_bathroom
    service: input_boolean.turn_off
  mode: single
- id: 1a4dcada3ca821295481e1b6e60539c3
  alias: someone in floor - light manual off
  description: ''
  trigger:
  - entity_id: group.floor_light
    platform: state
    to: 'off'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.someone_in_floor
    service: input_boolean.turn_off
  mode: single
- id: '1598357388059'
  alias: Eli aufgestanden
  description: ''
  trigger:
  - entity_id: binary_sensor.bett_elitsa
    platform: state
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_this_day
      state: 'on'
    - condition: state
      entity_id: input_boolean.eli_hat_dienst
      state: 'on'
  - after: 05:20
    before: 07:00
    condition: time
  - condition: state
    entity_id: person.elitsa
    state: home
  - condition: state
    entity_id: binary_sensor.bett_christian
    state: 'off'
  action:
  - entity_id: input_boolean.eli_aufgestanden
    service: input_boolean.turn_on
  mode: single
- id: '1598357693512'
  alias: Eli aufgestanden - auto off
  description: ''
  trigger:
  - entity_id: input_boolean.eli_aufgestanden
    platform: state
    to: 'on'
  condition: []
  action:
  - delay:
      minutes: 5
  - entity_id: input_boolean.eli_aufgestanden
    service: input_boolean.turn_off
  - data: {}
    entity_id: switch.bedroom_bed_light_switch
    service: switch.turn_off
  mode: single
- id: '1598361713949'
  alias: Start Waschmaschine Restdauer Countdown
  description: ''
  trigger:
  - platform: time_pattern
    minutes: /1
  condition:
  - condition: state
    entity_id: sensor.washing_machine_status
    state: Läuft
  action:
  - data: {}
    entity_id: script.waschmaschine_dauer_countdown
    service: script.turn_on
  mode: restart
- id: '1598367824842'
  alias: Low Battery Message
  description: ''
  trigger:
  - at: '19:00'
    platform: time
  condition:
  - condition: template
    value_template: "{%- set battery_alert_threshold = 20|int -%}\n{% set low_batteries\
      \ = namespace(entity=[]) %} \n{%- for state in states.sensor -%}\n{% set item_name\
      \ = state.attributes[\"friendly_name\"] | lower %}\n{%- if state.state | int\
      \ < battery_alert_threshold and state.state != \"unavailable\"\nand state.attributes[\"\
      device_class\"] == \"battery\" %} \n{% if state.name != \"iPhone arbeit  Battery\
      \ State\" and\nstate.name != \"SkyBook Internal Battery State\" and\nstate.name\
      \ != \"SkysPad Battery State\" and\nstate.name != \"SkysPhone Battery State\"\
      \ and\nstate.name != \"iPhone Battery State\" and\nstate.name != \"Christian’s\
      \ MacBook Pro (2) Internal Battery State\"\n%}\n{% set low_batteries.entity\
      \ = low_batteries.entity + [state.name|replace(\" Battery Level\", \"\") + \"\
      \ \" + state.state + \"%\"] %} \n{% endif %}\n{%- endif -%} \n{%- endfor %}\n\
      {{ low_batteries.entity | count | int > 0 }}"
  action:
  - data_template:
      message: '{%- set battery_alert_threshold = 20|int -%}  {% set low_batteries
        = namespace(entity=[]) %}  {%- for state in states.sensor -%} {% set item_name
        = state.attributes["friendly_name"] | lower %} {%- if state.state | int <
        battery_alert_threshold and state.state != "unavailable" and state.attributes["device_class"]
        == "battery" %}  {% if state.name != "iPhone arbeit  Battery State" and state.name
        != "SkyBook Internal Battery State" and state.name != "SkysPad Battery State"
        and state.name != "SkysPhone Battery State" and state.name != "iPhone Battery
        State" and state.name != "Christian’s MacBook Pro (2) Internal Battery State"
        %} {% set low_batteries.entity = low_batteries.entity + [state.name |replace("
        Battery Level", "") + " " + state.state + "%"] %}  {% endif %} {%- endif -%}  {%-
        endfor %}

        Low Battery: {{ low_batteries.entity | join(",") }}'
    service: notify.devices_christian
  mode: single
- id: 1aebeafbd2a553e6e5553ca7bae43db3
  alias: Beamer aus (Living Beamer)
  trigger:
  - below: '5'
    entity_id: sensor.living_beamer_power
    platform: numeric_state
  condition:
  - condition: state
    entity_id: switch.living_beamer_switch
    state: 'on'
  action:
  - entity_id: switch.living_beamer_switch
    service: switch.turn_off
  - data: {}
    entity_id: switch.wohnzimmer_tv_relay
    service: switch.turn_on
  - data: {}
    entity_id: switch.living_main_light_switch
    service: switch.turn_on
  initial_state: true
  mode: single
- id: '1598870390610'
  alias: Kino Ende
  description: ''
  trigger:
  - entity_id: binary_sensor.living_canvas_sensor
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data: {}
    entity_id: switch.living_main_light_switch
    service: switch.turn_on
  - data: {}
    entity_id: switch.wohnzimmer_tv_relay
    service: switch.turn_on
  - data: {}
    entity_id: input_boolean.rollo_automatik_wohnzimmer
    service: input_boolean.turn_on
  - data: {}
    entity_id: input_boolean.rollo_automatik_balkon
    service: input_boolean.turn_on
  - data: {}
    entity_id: input_boolean.rollo_automatik_kueche
    service: input_boolean.turn_on
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - data: {}
        entity_id: script.kueche_rollo_hoch
        service: script.turn_on
      - data: {}
        entity_id: script.wohnzimmer_rollo_hoch
        service: script.turn_on
      - data: {}
        entity_id: script.balkon_rollo_hoch
        service: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - data: {}
        entity_id: script.kueche_rollo_50
        service: script.turn_on
      - data: {}
        entity_id: script.balkon_rollo_50
        service: script.turn_on
      - data: {}
        entity_id: script.wohnzimmer_rollo_50
        service: script.turn_on
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - data: {}
        entity_id: script.kueche_rollo_runter
        service: script.turn_on
      - data: {}
        entity_id: script.wohnzimmer_rollo_runter
        service: script.turn_on
      - data: {}
        entity_id: script.balkon_rollo_runter
        service: script.turn_on
    default: []
  - data: {}
    entity_id: switch.beamer_power_off
    service: switch.turn_on
  - delay:
      seconds: 1
  - data: {}
    entity_id: switch.beamer_power_off
    service: switch.turn_off
  - data: {}
    entity_id: switch.kino_player
    service: switch.turn_off
  - data:
      source: TV AUDIO
    entity_id: media_player.denon_avr_x2000
    service: media_player.select_source
  - data: {}
    entity_id: input_boolean.silent_messages_only
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.server_shutdown_overwrite
    service: input_boolean.turn_off
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: above_horizon
      sequence:
      - service: light.turn_off
        data: {}
        entity_id: light.kuchen_lightstrip
      - service: light.turn_off
        data: {}
        entity_id: light.wohnzimmer_couchlicht
    default: []
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.lightstrip_random_color
  - after: input_datetime.aquarium_licht_an_ab
    before: '22:25:00'
    condition: time
  - condition: time
    after: input_datetime.aquarium_licht_an_ab
  - data: {}
    entity_id: switch.living_aquarium_light
    service: switch.turn_on
  mode: single
- id: '1598871951679'
  alias: Kino Plex playing
  description: ''
  trigger:
  - entity_id: media_player.plex_plex_for_android_tv_plex_beamer
    platform: state
  condition:
  - condition: state
    entity_id: switch.living_beamer_switch
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: media_player.plex_plex_for_android_tv_plex_beamer
        state: playing
      sequence:
      - data: {}
        entity_id: switch.wohnzimmer_stehlicht_schalter
        service: switch.turn_off
      - data: {}
        entity_id: switch.living_aquarium_light
        service: switch.turn_off
      - service: light.turn_off
        data: {}
        entity_id: light.wohnzimmer_couchlicht
      - service: light.turn_off
        data: {}
        entity_id: light.kuchen_lightstrip
      - service: switch.turn_off
        data: {}
        entity_id: switch.living_main_light_switch
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.someone_in_floor
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.someone_in_kitchen
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: media_player.plex_plex_for_android_tv_plex_beamer
          state: paused
        - condition: state
          entity_id: media_player.plex_plex_for_android_tv_plex_beamer
          state: idle
        - condition: state
          entity_id: switch.living_beamer_switch
          state: 'on'
      sequence:
      - data: {}
        entity_id: ligswitchht.stehlicht_wohnzimmer
        service: switch.turn_on
      - service: light.turn_on
        data:
          rgb_color:
          - 255
          - 181
          - 108
          brightness: 255
        entity_id: light.wohnzimmer_couchlicht
      - service: light.turn_on
        data:
          rgb_color:
          - 255
          - 181
          - 108
          brightness: 255
        entity_id: light.kuchen_lightstrip
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.lightstrip_random_color
    default: []
  mode: single
- id: '1598950550396'
  alias: someone in bathroom - light manual on
  description: ''
  trigger:
  - entity_id: switch.bathroom_main_light_switch
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_bathroom
    service: input_boolean.turn_off
  mode: single
- id: 59e3ba7565af26897832c2cc38a7ae6c
  alias: someone in kitchen - light manual on
  description: ''
  trigger:
  - entity_id: switch.kitchen_main_light_switch
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_kitchen
    service: input_boolean.turn_off
  mode: single
- id: ca7268bc5941756a29d6d86fe1051a6d
  alias: someone in living - light manual on
  description: ''
  trigger:
  - entity_id: switch.living_main_light_switch
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_living
    service: input_boolean.turn_off
  mode: single
- id: 979f658c57a1fbd7106eb32ef5e60752
  alias: someone in workingroom - light manual on
  description: ''
  trigger:
  - entity_id: switch.workingroom_light_switch
    platform: state
    to: 'on'
  - entity_id: light.stehlicht
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_workingroom
    service: input_boolean.turn_off
  mode: single
- id: 3ecccc4b6de57e6a09580f7f65a69f0e
  alias: someone in bedroom - light manual on
  description: ''
  trigger:
  - entity_id: switch.bedroom_main_light_switch
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_bedroom
    service: input_boolean.turn_off
  mode: single
- id: '1598955924744'
  alias: someone in kitchen - force light off - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_light_off_kitchen
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_occupied_kitchen
    service: input_boolean.turn_off
  mode: single
- id: '1598955967763'
  alias: someone in kitchen - force occupied on - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_occupied_kitchen
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_kitchen
    service: input_boolean.turn_off
  mode: single
- id: 288e65d73360ce20afd459d198ed032b
  alias: someone in living - force light off - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_light_off_living
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_occupied_living
    service: input_boolean.turn_off
  mode: single
- id: 866340be2ef086c8ecc0b17fae5f8174
  alias: someone in living - force occupied on - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_occupied_living
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_living
    service: input_boolean.turn_off
  mode: single
- id: 5a2468556537fd942f49b36a0ec02ef4
  alias: someone in workingroom - force light off - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_light_off_workingroom
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_occupied_workingroom
    service: input_boolean.turn_off
  mode: single
- id: 2d4443fdfad9c4887776352f81cc37a4
  alias: someone in workingroom - force occupied on - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_occupied_workingroom
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_workingroom
    service: input_boolean.turn_off
  mode: single
- id: 4a171a21c30c45c5feb396cbec4cd611
  alias: someone in bedroom - force light off - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_light_off_bedroom
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_occupied_bedroom
    service: input_boolean.turn_off
  mode: single
- id: abf13d0c9d8ef10cd2aa435bd8f25310
  alias: someone in bedroom - force occupied on - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_occupied_bedroom
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_bedroom
    service: input_boolean.turn_off
  mode: single
- id: a12fbe7fef947698d748184b47d8c330
  alias: someone in bathroom - force light off - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_light_off_bathroom
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_occupied_bathroom
    service: input_boolean.turn_off
  mode: single
- id: f168c63b223ab0fe4ce50536d7e3232a
  alias: someone in bathroom - force occupied on - on
  description: ''
  trigger:
  - entity_id: input_boolean.force_occupied_bathroom
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.force_light_off_bathroom
    service: input_boolean.turn_off
  mode: single
- id: '1599295176713'
  alias: Schlafmodus aus - Bedroom window open
  description: ''
  trigger:
  - entity_id: binary_sensor.bedroom_window_sensor_right
    platform: state
    to: 'on'
  - entity_id: binary_sensor.schlafzimmer_fenster_links
    platform: state
    to: 'on'
  condition:
  - after: '6:30'
    condition: time
  - condition: state
    entity_id: group.sleepmode_all_but_bedroom
    state: 'off'
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.rollo_automatik_schlafzimmer
  - delay:
      seconds: 2
  - data: {}
    entity_id: input_boolean.sleepmode_bedroom
    service: input_boolean.turn_off
  mode: single
- id: '1599295317460'
  alias: skynas started
  description: ''
  trigger:
  - entity_id: switch.skynas
    platform: state
    to: 'on'
  condition: []
  action:
  - data: {}
    entity_id: input_boolean.skynas_starting
    service: input_boolean.turn_off
  mode: single
- id: '1599379432009'
  alias: Schlafmodus Schlafzimmer ende
  description: ''
  trigger:
  - entity_id: binary_sensor.bedroom_door_manualy
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: group.sleepmode_all_but_bedroom
    state: 'off'
  - condition: state
    entity_id: input_boolean.sleepmode_bedroom
    state: 'on'
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.bett_christian
      state: 'on'
    - condition: state
      entity_id: binary_sensor.bett_elitsa
      state: 'on'
  action:
  - data: {}
    entity_id: input_boolean.sleepmode_bedroom
    service: input_boolean.turn_off
  - data: {}
    entity_id: input_boolean.sleepmode
    service: input_boolean.turn_off
  mode: single
- id: '1599552399447'
  alias: Waschmaschine fertig - jemand im raum dann ausschalten
  description: ''
  trigger:
  - entity_id: binary_sensor.abstellkammer_motion
    platform: state
    to: 'on'
    from: 'off'
  condition:
  - condition: state
    entity_id: sensor.washing_machine_status
    state: Fertig
  - condition: state
    entity_id: switch.washing_switch
    state: 'on'
  action:
  - data: {}
    entity_id: switch.washing_switch
    service: switch.turn_off
  mode: single
- id: '1599570054055'
  alias: Xbox Eli aus dann Strom aus
  description: ''
  trigger:
  - below: '5'
    entity_id: sensor.xbox_2_wattage
    for: '30'
    platform: numeric_state
  condition:
  - condition: state
    entity_id: input_boolean.zeit_fur_ein_update
    state: 'off'
  action:
  - data: {}
    entity_id: switch.xbox_2_relay
    service: switch.turn_off
  mode: single
- id: '1600070978643'
  alias: someone in bathroom check when door opens/closes
  description: ''
  trigger:
  - entity_id: binary_sensor.bathroom_door_manualy
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data: {}
    service: script.bathroom_still_occupied_check
  mode: single
- id: '1600160227237'
  alias: someone in bathroom check when door opens/closes - chancel
  description: ''
  trigger:
  - entity_id: binary_sensor.bathroom_multi_sensor_sensor
    platform: state
    to: 'on'
  - platform: state
    entity_id: binary_sensor.badezimmer_motion
    to: 'on'
  - platform: state
    entity_id: binary_sensor.badezimmer_dusche_motion
    to: 'on'
  condition:
  - condition: state
    entity_id: script.bathroom_still_occupied_check
    state: 'on'
  action:
  - data: {}
    entity_id: script.bathroom_still_occupied_check
    service: script.turn_off
  - service: notify.devices_christian
    data:
      message: someone in bathroom check when door opens/closes - chancel
  mode: single
- id: '1600250432058'
  alias: IOS Action Test
  description: ''
  trigger:
  - event_data:
      actionName: TestAction
    event_type: ios.action_fired
    platform: event
  condition: []
  action:
  - data:
      message: Test Action Fired
    service: notify.devices_christian
  mode: single
- id: '1600251099665'
  alias: IOS Window check off
  description: ''
  trigger:
  - event_data:
      actionName: WindowCheck
    event_type: ios.action_fired
    platform: event
  condition: []
  action:
  - data:
      entity_id: input_boolean.window_open_check
    service: input_boolean.turn_off
  mode: single
- id: '1600431231161'
  alias: Eli show news
  description: ''
  trigger:
  - platform: tag
    tag_id: 3150b4fd-9a6f-460f-911f-a350ee5b7c63
  condition:
  - condition: time
    after: 05:30
    before: 07:00
  action:
  - service: script.turn_on
    data: {}
    entity_id: script.morning_eli_play_news
  mode: single
- id: a6123682672e483b78af8a4582796821
  alias: ask for eli working on saturday
  trigger:
  - at: '21:45:00'
    platform: time
  condition:
  - condition: time
    weekday:
    - fri
  - condition: state
    entity_id: binary_sensor.workday_next_day
    state: 'off'
  action:
  - data_template:
      data:
        push:
          category: weekend_work
      message: Musst du morgen Arbeiten 😷💉? Dann mache ich dir wieder alles wie sonst
        an 📺. (Lange drücken für Optionen)
      title: Wochenend Dienst
    service: notify.devices_elitsa
  initial_state: true
  mode: single
- id: 2426b77f37d84245c52e068c2d3592d9
  alias: set tomorrow eli working active
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: WORKING_SATURDAY
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.eli_hat_dienst
  - service: notify.devices_elitsa
    data:
      message: '{{ ["😔", "😟", "😓", "😢", "😭", "😿", "😞", "🙁", "😫"] | random }} OK, ist
        vermerkt. Dann bis morgen früh.'
  initial_state: true
  mode: single
- id: 9fc256f089e5a6f3a498eb73dbdbc7c8
  alias: tomorrow eli not working
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: NOT_WORKING_SATURDAY
  action:
  - service: notify.devices_elitsa
    data:
      message: Juhu {{ ["🙋", "😺", "😃", "☺️", "💐", "🥳"] | random }}{{ ["🌹", "🌺", "🌼",
        "🌻", "🌸", "🌷", "🌲", "🍀", "🦋", "🐇", "🦙"] | random }}, dann hab ein schönes
        Wochenende.
  initial_state: true
  mode: single
- id: '1600506285794'
  alias: Schlafzimmer TV aus dann reset Sleeptimer
  description: ''
  trigger:
  - platform: state
    entity_id: switch.bedroom_tv_switch_switch
    to: 'off'
    from: 'on'
  condition: []
  action:
  - service: input_number.set_value
    data:
      value: 0
    entity_id: input_number.sleeptimer_schlafzimmer_tv
  mode: single
- id: '1600506560270'
  alias: Sleeptimer Schlafzimmer TV  aktiviert
  description: ''
  trigger:
  - platform: state
    entity_id: input_number.sleeptimer_schlafzimmer_tv
    for: 00:00:05
  condition:
  - condition: numeric_state
    entity_id: input_number.sleeptimer_schlafzimmer_tv
    above: '0'
  action:
  - service: script.turn_off
    data: {}
    entity_id: script.sleeptimer_tv
  - service: script.turn_on
    data: {}
    entity_id: script.sleeptimer_tv
  - service: notify.schlafzimmer_firetv
    data:
      message: Schlafzimmer
      title: Sleeptimer TV gestartet ({{states("input_number.sleeptimer_schlafzimmer_tv")|int}}
        Minuten)
      data:
        fontsize: large
  mode: restart
- id: '1600506686157'
  alias: Sleeptimer Schlafzimmer TV  deaktiviert
  description: ''
  trigger:
  - platform: state
    entity_id: input_number.sleeptimer_schlafzimmer_tv
    to: '0.0'
  - platform: state
    entity_id: switch.bedroom_tv_switch_switch
    to: 'off'
    from: 'on'
  condition: []
  action:
  - service: script.turn_off
    data: {}
    entity_id: script.sleeptimer_tv
  - service: notify.schlafzimmer_firetv
    data:
      message: Schlafzimmer
      title: Sleeptimer TV beendet
      data:
        fontsize: large
  mode: single
- id: '1600762626775'
  alias: Work Call Starting
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_active
    to: 'on'
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_airpods_pro_von_christian_2
    to: 'on'
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_facetime_hd_camera_built_in
    to: 'on'
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_microphone_in_use
    to: 'on'
  condition: []
  action:
  - service: input_text.set_value
    data:
      value: '{{ states("media_player.spotify_christian_schimanski") }}'
    entity_id: input_text.last_spotify_status
  - service: media_player.media_pause
    data: {}
    entity_id: media_player.spotify_christian_schimanski
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.christians_macbook_pro_2_facetime_hd_camera_built_in
        state: 'on'
      - condition: state
        entity_id: switch.workingroom_light_switch
        state: 'off'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.workingroom_light_switch
    default: []
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.nicht_stoeren
  mode: single
- id: '1600762854186'
  alias: Work Call Ending
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_facetime_hd_camera_built_in
    to: 'off'
    for: 00:00:05
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_airpods_pro_von_christian_2
    to: 'off'
    for: 00:00:05
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_microphone_in_use
    to: 'off'
    for: 00:00:05
  condition:
  - condition: state
    entity_id: binary_sensor.christians_macbook_pro_2_airpods_pro_von_christian_2
    state: 'off'
  - condition: state
    entity_id: binary_sensor.christians_macbook_pro_2_facetime_hd_camera_built_in
    state: 'off'
  - condition: state
    entity_id: binary_sensor.christians_macbook_pro_2_microphone_in_use
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_text.last_spotify_status
        state: playing
      sequence:
      - service: notify.mobile_app_christians_macbook_pro_2
        data:
          message: Spotify spielt gleich wieder, nicht erschrecken. 🙂
      - delay:
          seconds: 5
      - service: media_player.media_play
        data: {}
        entity_id: media_player.spotify_christian_schimanski
    default: []
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.workingroom_multi_sensor_luminance
        above: '50'
      sequence:
      - service: switch.turn_off
        data: {}
        entity_id: switch.workingroom_light_switch
    default: []
  mode: single
- id: '1600763769050'
  alias: set good night
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.sleepmode
    to: 'on'
  condition: []
  action:
  - service: script.turn_on
    data: {}
    entity_id: script.alexa_good_night
  mode: single
- id: '1600846703338'
  alias: Home Office Power On/Off for Laptop and Monitor
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.macbook_arbeit_active
    for: 00:05:00
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.macbook_arbeit_active
        state: 'on'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.monitor_relay
    - conditions:
      - condition: state
        entity_id: binary_sensor.macbook_arbeit_active
        state: 'off'
      sequence:
      - service: switch.turn_off
        data: {}
        entity_id: switch.monitor_relay
    default: []
  mode: single
- id: '1600870157123'
  alias: Nickerchen starten
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.nickerchen_aktiv
    to: 'on'
  condition: []
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.rollo_automatik_schlafzimmer
  - service: switch.turn_off
    data: {}
    entity_id: switch.bedroom_main_light_switch
  - service: script.turn_on
    data: {}
    entity_id: script.schlafzimmer_rollo_runter
  - service: switch.turn_on
    data: {}
    entity_id: switch.bedroom_tv_switch_switch
  - wait_template: '{{ is_state("binary_sensor.fire_tv_stick_schlafzimmer", "on")
      }}'
  - service: input_number.set_value
    data:
      value: 30
    entity_id: input_number.sleeptimer_schlafzimmer_tv
  mode: single
- id: '1600955636113'
  alias: living tv off - reset roller shutter status
  description: ''
  trigger:
  - platform: state
    entity_id: switch.wohnzimmer_entertainment
    to: 'off'
  condition: []
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.rollo_automatik_wohnzimmer
  mode: single
- id: '1601043953248'
  alias: Wohnzimmer glotze an rollo Automatik an/aus
  description: ''
  trigger:
  - platform: state
    entity_id: switch.wohnzimmer_entertainment
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: switch.wohnzimmer_entertainment
        state: 'on'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.rollo_automatik_wohnzimmer
    - conditions:
      - condition: state
        entity_id: switch.wohnzimmer_entertainment
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.rollo_automatik_wohnzimmer
    default: []
  mode: single
- id: '1601113991901'
  alias: Nickerchen Ende
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.bedroom_door_manualy
    from: 'off'
    to: 'on'
    for: 00:00:03
  condition:
  - condition: state
    entity_id: input_boolean.nickerchen_aktiv
    state: 'on'
    for: 00:30:00
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.nickerchen_aktiv
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.rollo_automatik_schlafzimmer
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.force_light_off_bedroom
  mode: single
- id: '1601143276916'
  alias: someone in bedroom off - rollo automatic an
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.someone_in_bedroom
    to: 'off'
    from: 'on'
  condition: []
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.rollo_automatik_schlafzimmer
  mode: single
- id: '1601145018131'
  alias: Sleeptimer Schlafzimmer TV send reminder
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: input_number.sleeptimer_schlafzimmer_tv
    above: '0'
  condition:
  - condition: numeric_state
    entity_id: input_number.sleeptimer_schlafzimmer_tv
    above: '0'
  action:
  - delay:
      minutes:
        '[object Object]':
  - service: notify.schlafzimmer_firetv
    data:
      message: Sleeptimer schaltet den TV in ca.{% set sleeptimer = states("input_number.sleeptimer_schlafzimmer_tv")
        %} {{ sleeptimer | int - (sleeptimer | int *90/100) }} Minuten ab
      title: Schlafzimmer
      data:
        fontsize: large
  - service: notify.devices_christian
    data:
      message: Sleeptimer schaltet den TV in ca.{% set sleeptimer = states("input_number.sleeptimer_schlafzimmer_tv")
        %} {{ sleeptimer | int - (sleeptimer | int *90/100) }} Minuten ab
  mode: single
- id: '1601222605072'
  alias: rollo automatic on - set rollo stand
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.rollo_automatik_arbeitszimmer
    to: 'on'
  - platform: state
    entity_id: input_boolean.rollo_automatik_badezimmer
    to: 'on'
  - platform: state
    entity_id: input_boolean.rollo_automatik_balkon
    to: 'on'
  - platform: state
    entity_id: input_boolean.rollo_automatik_kueche
    to: 'on'
  - platform: state
    entity_id: input_boolean.rollo_automatik_schlafzimmer
    to: 'on'
  - platform: state
    entity_id: input_boolean.rollo_automatik_wohnzimmer
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_arbeitszimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.arbeitszimmer_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_arbeitszimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.arbeitszimmer_rollo_runter
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_arbeitszimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.arbeitszimmer_rollo_50
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_kueche
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.kueche_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_kueche
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.kueche_rollo_runter
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_kueche
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.kueche_rollo_50
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_wohnzimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.wohnzimmer_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_wohnzimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.wohnzimmer_rollo_runter
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_wohnzimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.wohnzimmer_rollo_50
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_badezimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.badezimmer_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_badezimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.badezimmer_rollo_runter
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_badezimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.badezimmer_rollo_50
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_schlafzimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.schlafzimmer_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_schlafzimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.schlafzimmer_rollo_runter
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_schlafzimmer
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.schlafzimmer_rollo_50
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_balkon
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.balkon_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_balkon
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.balkon_rollo_runter
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_balkon
        state: 'on'
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.balkon_rollo_50
    default: []
  mode: single
- id: '1601280698609'
  alias: someone in room off - activate rollo automatic
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.someone_in_bedroom
    to: 'off'
  - platform: state
    entity_id: input_boolean.someone_in_bathroom
    to: 'off'
  - platform: state
    entity_id: input_boolean.someone_in_kitchen
    to: 'off'
  - platform: state
    entity_id: input_boolean.someone_in_workingroom
    to: 'off'
  - platform: state
    entity_id: input_boolean.someone_in_living
    to: 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_kueche
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_kitchen
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.rollo_automatik_kueche
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_wohnzimmer
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_living
        state: 'off'
      - condition: state
        entity_id: input_boolean.someone_in_living
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.rollo_automatik_wohnzimmer
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_arbeitszimmer
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.rollo_automatik_arbeitszimmer
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_schlafzimmer
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_bedroom
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.rollo_automatik_schlafzimmer
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.rollo_automatik_badezimmer
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_bathroom
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.rollo_automatik_badezimmer
    default: []
  mode: single
- id: '1601288459641'
  alias: Waschmaschine Programmzeit setzen
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.waschprogramme
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: BAUMWOLLE 90°
      sequence:
      - service: input_number.set_value
        data:
          value: 195
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 195
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: BAUMWOLLE MIT VORWÄSCHE
      sequence:
      - service: input_number.set_value
        data:
          value: 165
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 165
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: BAUMWOLLE ECO 60 C°
      sequence:
      - service: input_number.set_value
        data:
          value: 195
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 195
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: BAUMWOLLE 40 C°
      sequence:
      - service: input_number.set_value
        data:
          value: 185
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 185
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: ECO 20°
      sequence:
      - service: input_number.set_value
        data:
          value: 103
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 103
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: PFLEGELEICHT
      sequence:
      - service: input_number.set_value
        data:
          value: 94
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 94
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: WOLLE
      sequence:
      - service: input_number.set_value
        data:
          value: 45
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 45
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: KLARSPÜLEN
      sequence:
      - service: input_number.set_value
        data:
          value: 41
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 41
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: ' SCHLEUDERN'
      sequence:
      - service: input_number.set_value
        data:
          value: 20
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 20
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: HANDWÄSCHE DELIKAT
      sequence:
      - service: input_number.set_value
        data:
          value: 95
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 95
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: SPORT
      sequence:
      - service: input_number.set_value
        data:
          value: 85
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 85
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: MISCHEN
      sequence:
      - service: input_number.set_value
        data:
          value: 92
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 92
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: HEMDEN
      sequence:
      - service: input_number.set_value
        data:
          value: 111
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 41
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: TÄGLICH 60 MIN.
      sequence:
      - service: input_number.set_value
        data:
          value: 65
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 65
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: EXPRESS 15 MIN
      sequence:
      - service: input_number.set_value
        data:
          value: 20
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 20
        entity_id: input_number.washing_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.waschprogramme
        state: Kein Program gewählt
      sequence:
      - service: input_number.set_value
        data:
          value: 0
        entity_id: input_number.minuten_bis_waschmaschine_fertig
      - service: input_number.set_value
        data:
          value: 0
        entity_id: input_number.washing_start_minutes
    default: []
  mode: single
- id: '1601291310721'
  alias: Waschmaschine - frag welches Program gewählt wurde
  description: ''
  trigger:
  - platform: state
    entity_id: switch.washing_switch
    from: 'off'
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: person.christian
        state: home
      sequence:
      - service: notify.devices_christian
        data:
          data:
            push:
              category: washing_program
          message: 🧺 Bitte wähle das gewählte Waschprogramm aus (Lange drücken)
          title: Waschprogramm
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: person.elitsa
        state: home
      sequence:
      - service: notify.devices_elitsa
        data:
          data:
            push:
              category: washing_program
          message: 🧺 Bitte wähle das gewählte Waschprogramm aus (Lange drücken)
          title: Waschprogramm
    default: []
  - service: input_select.select_option
    data:
      option: BAUMWOLLE ECO 60 C°
    entity_id: input_select.waschprogramme
  mode: single
- id: '1601294398737'
  alias: Waschmaschine Programm gewählt
  description: ''
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: BAUMWOLLE_90
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: EXPRESS_15_MIN
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: BAUMWOLLE_ECO_60
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: TAGLICH
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: ECO_20
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: ANDERE
  condition: []
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "BAUMWOLLE_90" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: BAUMWOLLE 90°
        entity_id: input_select.waschprogramme
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "EXPRESS_15_MIN" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: EXPRESS 15 MIN
        entity_id: input_select.waschprogramme
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "BAUMWOLLE_ECO_60"
          }}'
      sequence:
      - service: input_select.select_option
        data:
          option: BAUMWOLLE ECO 60 C°
        entity_id: input_select.waschprogramme
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "TAGLICH" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: TÄGLICH 60 MIN
        entity_id: input_select.waschprogramme
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "ECO_20" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: ECO 20°
        entity_id: input_select.waschprogramme
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "ANDERE" }}'
      sequence:
      - choose:
        - conditions:
          - condition: template
            value_template: '{{trigger.event.data["sourceDeviceID"] == "iphone" }}'
          sequence:
          - service: notify.devices_elitsa
            data:
              message: Bitte in der App das korrekte Programm wählen (Hier tippen)
              data:
                url: /lovelace/abstellraum
        - conditions:
          - condition: template
            value_template: '{{trigger.event.data["sourceDeviceID"] != "iphone" }}'
          sequence:
          - service: notify.devices_elitsa
            data:
              message: Bitte in der App das korrekte Programm wählen (Hier tippen)
              data:
                url: /lovelace/abstellraum
        default: []
    default: []
  - service: notify.devices_christian
    data:
      message: '{{ trigger.event.data }}'
  mode: single
- id: '1601307013165'
  alias: NFC Nickerchen oder Schlafenszeit
  description: ''
  trigger:
  - platform: tag
    tag_id: 7445f8dc-c197-475b-98a1-9926062f99f4
  condition: []
  action:
  - choose:
    - conditions:
      - condition: time
        after: '14:00'
        before: '19:00'
      sequence:
      - service: input_boolean.toggle
        data: {}
        entity_id: input_boolean.nickerchen_aktiv
    - conditions:
      - condition: time
        after: '21:00'
        before: 04:00
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.alexa_good_night
    - conditions:
      - condition: time
        after: 04:00
        before: '13:00'
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.alexa_good_morning
    default: []
  mode: single
- id: '1601494679297'
  alias: nfs_zocken
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.nfc_zocken
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.nfc_zocken
        state: 'on'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.arbeitszimmer_tv_relay
      - service: light.turn_on
        data:
          brightness: 130
        entity_id: light.stehlicht
      - service: switch.turn_off
        data: {}
        entity_id: switch.workingroom_light_switch
    - conditions:
      - condition: state
        entity_id: input_boolean.nfc_zocken
        state: 'off'
      sequence:
      - service: homeassistant.turn_off
        data: {}
        entity_id: group.workingroom_light
    default: []
  mode: single
- id: '1601992222644'
  alias: nfc toggle living tv
  description: ''
  trigger:
  - platform: tag
    tag_id: 3150b4fd-9a6f-460f-911f-a350ee5b7c63
  condition:
  - condition: time
    after: 07:00
    before: 05:00
  action:
  - service: switch.toggle
    data: {}
    entity_id: switch.wohnzimmer_entertainment
  mode: single
- id: '1601992483536'
  alias: Wohnzimmer TV aus dann Rollo auf aktuellen stand
  description: ''
  trigger:
  - platform: state
    entity_id: switch.wohnzimmer_entertainment
    to: 'off'
    from: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.sleepmode_living
    state: 'off'
  - condition: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.wohnzimmer_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.wohnzimmer_rollo_50
    default: []
  mode: single
- id: '1601992749958'
  alias: bedroom reset rollo
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.someone_in_bedroom
    to: 'off'
    from: 'on'
    for: 00:10:00
  condition:
  - condition: state
    entity_id: input_boolean.sleepmode_bedroom
    state: 'off'
  - condition: state
    entity_id: input_boolean.nickerchen_aktiv
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Offen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.schlafzimmer_rollo_hoch
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.schlafzimmer_rollo_runter
    - conditions:
      - condition: state
        entity_id: input_select.rollo_stand
        state: Sonnenschutz
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.schlafzimmer_rollo_50
    default: []
  mode: single
- id: '1602058681514'
  alias: Spülmaschine läuft
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.kitchen_disher_power
    above: '2'
  condition:
  - condition: state
    entity_id: input_boolean.dishwasher_active
    state: 'off'
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.dishwasher_active
  mode: single
- id: '1602058875425'
  alias: Spülmaschine fertig
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.kitchen_disher_power
    for: 00:01:00
    below: '0.6'
  - platform: state
    entity_id: input_boolean.sleepmode
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.dishwasher_active
    state: 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.dishwasher_status
      state: Aus
  - condition: state
    entity_id: input_boolean.sleepmode
    state: 'off'
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.dishwasher_active
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.dishwasher_done
  - service: input_select.select_option
    data:
      option: Kein Program
    entity_id: input_select.dishwasher_programs
  mode: single
- id: '1602061175180'
  alias: Spülmaschine Zeit setzen
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.dishwasher_programs
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.dishwasher_programs
        state: Eco
      sequence:
      - service: input_number.set_value
        data:
          value: 237
        entity_id: input_number.dishwasher_resttime
      - service: input_number.set_value
        data:
          value: 237
        entity_id: input_number.dishwasher_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.dishwasher_programs
        state: Normal
      sequence:
      - service: input_number.set_value
        data:
          value: 137
        entity_id: input_number.dishwasher_resttime
      - service: input_number.set_value
        data:
          value: 137
        entity_id: input_number.dishwasher_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.dishwasher_programs
        state: Intensiv
      sequence:
      - service: input_number.set_value
        data:
          value: 180
        entity_id: input_number.dishwasher_resttime
      - service: input_number.set_value
        data:
          value: 180
        entity_id: input_number.dishwasher_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.dishwasher_programs
        state: Schnell
      sequence:
      - service: input_number.set_value
        data:
          value: 39
        entity_id: input_number.dishwasher_resttime
      - service: input_number.set_value
        data:
          value: 39
        entity_id: input_number.dishwasher_start_minutes
    - conditions:
      - condition: state
        entity_id: input_select.dishwasher_programs
        state: Vorspülen
      sequence:
      - service: input_number.set_value
        data:
          value: 11
        entity_id: input_number.dishwasher_resttime
      - service: input_number.set_value
        data:
          value: 11
        entity_id: input_number.dishwasher_start_minutes
    default:
    - service: input_number.set_value
      data:
        value: 0
      entity_id: input_number.dishwasher_resttime
  mode: single
- id: '1602061420508'
  alias: Spülmaschine Leerlauf vor Start
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.dishwasher_status
    to: Leerlauf
    from: Aus
  condition:
  - condition: state
    entity_id: input_boolean.dishwasher_active
    state: 'off'
  action:
  - service: input_select.select_option
    data:
      option: Eco
    entity_id: input_select.dishwasher_programs
  mode: single
- id: '1602062603621'
  alias: Spülmaschine - frag welches Program gewählt wurde
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.dishwasher_status
    from: Aus
    to: Leerlauf
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: person.elitsa
        state: home
      sequence:
      - service: notify.devices_elitsa
        data:
          data:
            push:
              category: disher_program
          message: 🍽️ Bitte wähle das Spülprogram aus
          title: Spülprogram
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: person.christian
        state: home
      sequence:
      - service: notify.devices_christian
        data:
          data:
            push:
              category: disher_program
          message: 🍽️ Bitte wähle das Spülprogram aus
          title: Spülprogram
    default: []
  - service: input_select.select_option
    data:
      option: Eco
    entity_id: input_select.dishwasher_programs
  mode: single
- id: '1602062755289'
  alias: Spülmaschine Programm gewählt
  description: ''
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: ECO
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: NORMAL
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: INTENSIV
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: SCHNELL
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: VORSPUELEN
  condition: []
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "ECO" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: Eco
        entity_id: input_select.dishwasher_programs
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "NORMAL" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: Normal
        entity_id: input_select.dishwasher_programs
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "INTENSIV" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: Intensiv
        entity_id: input_select.dishwasher_programs
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "SCHNELL" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: Schnell
        entity_id: input_select.dishwasher_programs
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["actionName"] == "VORSPUELEN" }}'
      sequence:
      - service: input_select.select_option
        data:
          option: Vorspülen
        entity_id: input_select.dishwasher_programs
    default: []
  mode: single
- id: '1602063657095'
  alias: Spülmaschine Aus
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.kitchen_disher_power
    below: '0.1'
  condition: []
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.dishwasher_done
  - service: input_boolean.turn_off
    entity_id: input_boolean.dishwasher_active
    data: {}
  - service: input_select.select_option
    data:
      option: Kein Program
    entity_id: input_select.dishwasher_programs
  mode: single
- id: '1602063820380'
  alias: Start Spülmaschine Restdauer Countdown
  description: ''
  trigger:
  - platform: time_pattern
    minutes: /1
  condition:
  - condition: state
    entity_id: input_boolean.dishwasher_active
    state: 'on'
  action:
  - data: {}
    entity_id: script.spulmaschine_dauer_countdown
    service: script.turn_on
  mode: restart
- id: 5ed11c1799aedd333705176f2d4b6229
  alias: Küche Untergrund Beleuchtung - Anschalten wenn 45 bevor Sonnenuntergang (Kitchen
    Underground Light)
  trigger:
  - platform: sun
    event: sunset
    offset: -00:45:00
  - platform: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    to: 'off'
    from: 'on'
  condition:
  - condition: sun
    after: sunset
    after_offset: -00:45:00
  - condition: state
    entity_id: input_boolean.sleepmode_living
    state: 'off'
  - condition: state
    entity_id: input_boolean.sleepmode_kitchen
    state: 'off'
  action:
  - service: light.turn_on
    data:
      entity_id: light.kuchen_lightstrip
    entity_id: light.kuchen_lightstrip
  - service: light.turn_on
    data: {}
    entity_id: light.wohnzimmer_couchlicht
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'on'
      sequence:
      - service: light.turn_on
        data: {}
        entity_id: light.arbeitszimmer_tv_licht
    default: []
  initial_state: true
  mode: single
- id: 057655f27cf95c2568b4253d11daa752
  alias: Küche Untergrund Beleuchtung - ausschalten (Kitchen Underground Light)
  trigger:
  - platform: template
    value_template: '{{is_state("sensor.time", ''23:'' ~ states(''input_number.random_minute'')|int)}}'
  condition:
  - condition: state
    entity_id: input_boolean.nobody_home
    state: 'on'
  action:
  - service: light.turn_off
    data:
      entity_id: light.kuchen_lightstrip
  - service: light.turn_off
    data: {}
    entity_id: light.wohnzimmer_couchlicht
  initial_state: true
  mode: single
- id: 6a8856aae983bfeaadd54d2fc64ca03d
  alias: Küche Untergrund Beleuchtung - Zufällige Farbe setzen (Kitchen Underground
    Light)
  trigger:
  - platform: state
    entity_id: light.kuchen_lightstrip
    from: 'off'
    to: 'on'
  - platform: time_pattern
    minutes: /15
  - platform: state
    entity_id: light.wohnzimmer_couchlicht
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: input_boolean.lightstrip_random_color
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: light.arbeitszimmer_tv_licht
    to: 'on'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: light.kuchen_lightstrip
      state: 'on'
    - condition: state
      entity_id: light.wohnzimmer_couchlicht
      state: 'on'
    - condition: state
      entity_id: light.arbeitszimmer_tv_licht
      state: 'on'
  - condition: state
    entity_id: input_boolean.lightstrip_random_color
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.kuchen_lightstrip
        state: 'on'
      sequence:
      - service: light.turn_on
        data_template:
          entity_id: light.kuchen_lightstrip
          rgb_color:
          - '{{ states("input_number.color_red") | int }}'
          - '{{ states("input_number.color_green") | int }}'
          - '{{ states("input_number.color_blue") | int }}'
          brightness: 255
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: light.wohnzimmer_couchlicht
        state: 'on'
      - condition: state
        entity_id: switch.living_beamer_switch
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_living
        state: 'off'
      sequence:
      - service: light.turn_on
        data_template:
          entity_id: light.wohnzimmer_couchlicht
          rgb_color:
          - '{{ states("input_number.color_red") | int }}'
          - '{{ states("input_number.color_green") | int }}'
          - '{{ states("input_number.color_blue") | int }}'
          brightness: 255
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: light.arbeitszimmer_tv_licht
        state: 'on'
      - condition: state
        entity_id: sensor.scene_check_xbox
        state: 'false'
      sequence:
      - service: light.turn_on
        data_template:
          entity_id: light.arbeitszimmer_tv_licht
          rgb_color:
          - '{{ states("input_number.color_red") | int }}'
          - '{{ states("input_number.color_green") | int }}'
          - '{{ states("input_number.color_blue") | int }}'
          brightness: 255
    default: []
  - service: script.turn_on
    data: {}
    entity_id: script.set_random_color
  initial_state: true
  mode: single
- id: a764d98ea9ea6c798fb0dcb685a40a7a
  alias: Rollo Stand setzen - Sonnenschutz
  description: ''
  trigger:
  - entity_id: binary_sensor.balcony_multi_sensor_sensor
    platform: numeric_state
    above: '8000'
  - platform: numeric_state
    entity_id: sensor.balcony_multi_sensor_temperature
    above: '25'
  - entity_id: sun.sun
    platform: state
    to: above_horizon
  condition:
  - above: '20'
    condition: numeric_state
    entity_id: sensor.balcony_multi_sensor_temperature
  - condition: numeric_state
    entity_id: binary_sensor.balcony_multi_sensor_sensor
    above: '8000'
  action:
  - service: input_select.select_option
    data:
      option: Sonnenschutz
    entity_id: input_select.rollo_stand
  initial_state: true
  mode: single
- id: 912c58f73ce4866e2944f086120c3222
  alias: Rollo Stand setzen - Offen
  description: ''
  trigger:
  - below: '8000'
    entity_id: sensor.balcony_multi_sensor_luminance
    platform: numeric_state
    for: 00:15:00
  - entity_id: sensor.balcony_multi_sensor_temperature
    platform: state
  - entity_id: sun.sun
    platform: state
    to: above_horizon
  condition:
  - condition: numeric_state
    entity_id: sensor.balcony_multi_sensor_temperature
    below: '25'
  - condition: state
    entity_id: sun.sun
    state: above_horizon
  - condition: numeric_state
    entity_id: sensor.balcony_multi_sensor_luminance
    below: '8000'
  action:
  - service: input_select.select_option
    data:
      option: Offen
    entity_id: input_select.rollo_stand
  initial_state: true
  mode: single
- id: '1602736783747'
  alias: Wenn keiner mehr zuhause Schlafmodus aus
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.someone_home
    from: 'true'
    to: 'false'
    for: 00:15:00
  condition:
  - condition: state
    entity_id: input_boolean.sleepmode
    state: 'on'
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.sleepmode
  mode: single
- id: '1603018168743'
  alias: Genug gelüftet - Wohnzimmer Küche
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.wohnzimmer_absolute_luftfeuchtigkeit
    below: '9'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.kuchen_fenster_links
      state: 'on'
    - condition: state
      entity_id: binary_sensor.kitchen_window_sensor_right
      state: 'on'
    - condition: state
      entity_id: binary_sensor.balkon_fenster_links
      state: 'on'
    - condition: state
      entity_id: binary_sensor.balkon_fenster_rechts
      state: ''
    - condition: state
      entity_id: binary_sensor.living_window_sensor_right
      state: 'on'
    - condition: state
      entity_id: binary_sensor.wohnzimmer_fenster_links
      state: 'on'
  action:
  - service: notify.send_to_input_text
    data:
      message: Die Luft in Wohnzimmer und Küche ist jetzt ideal, bitte Fenster schliessen.
  mode: single
- id: 61db1a92c80150516a01642ea5378f0a
  alias: Genug gelüftet - Badezimmer
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.badezimmer_absolute_luftfeuchtigkeit
    below: '8.5'
  condition:
  - condition: state
    entity_id: binary_sensor.bathroom_window_manualy
    state: 'on'
  action:
  - service: notify.send_to_input_text
    data:
      message: Die Luft im Badezimmer ist jetzt ideal, bitte Fenster schliessen.
  mode: single
- id: 6bfa5f5e15ec8dd9c122858100cc1031
  alias: Genug gelüftet - Arbeitszimmer
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.arbeitszimmer_absolute_luftfeuchtigkeit
    below: '8.5'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.arbeitszimmer_fenster_links
      state: 'on'
    - condition: state
      entity_id: binary_sensor.arbeitszimmer_fenster_rechts
      state: 'on'
  action:
  - service: notify.send_to_input_text
    data:
      message: Die Luft im Arbeitszimmer ist jetzt ideal, bitte Fenster schliessen.
  mode: single
- id: b402f1cac7dea2065b048e8d0335da74
  alias: Genug gelüftet - Schlafzimmer
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.schlafzimmer_absolute_luftfeuchtigkeit
    below: '9'
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: binary_sensor.schlafzimmer_fenster_links
      state: 'on'
    - condition: state
      entity_id: binary_sensor.bedroom_window_sensor_right
      state: 'on'
  action:
  - service: notify.send_to_input_text
    data:
      message: Die Luft im Schlafzimmer ist jetzt ideal, bitte Fenster schliessen.
  mode: single
- id: '1603030204349'
  alias: Wohnzimmer TV aus check wenn keine Bewegung
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.living_multi_sensor_sensor
  - platform: state
    entity_id: binary_sensor.ping_wohnzimmer_tv
    from: 'off'
    to: 'on'
    for: 00:00:10
  condition:
  - condition: state
    entity_id: switch.living_beamer_switch
    state: 'off'
  - condition: state
    entity_id: switch.wohnzimmer_entertainment
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: binary_sensor.ping_wohnzimmer_tv
          state: 'on'
        - condition: state
          entity_id: binary_sensor.living_multi_sensor_sensor
          state: 'off'
      - condition: state
        entity_id: script.wohnzimmer_tv_wird_nicht_gebraucht_also_aus
        state: 'off'
      - condition: state
        entity_id: input_boolean.wohnzimmer_tv_aus_timer
        state: 'off'
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.wohnzimmer_tv_wird_nicht_gebraucht_also_aus
    - conditions:
      - condition: state
        entity_id: binary_sensor.living_multi_sensor_sensor
        state: 'on'
      - condition: state
        entity_id: input_boolean.wohnzimmer_tv_aus_timer
        state: 'on'
      sequence:
      - service: script.turn_off
        data: {}
        entity_id: script.wohnzimmer_tv_wird_nicht_gebraucht_also_aus
      - service: notify.wohnzimmer_firetv_4k
        data:
          message: Alles klar dann schau weiter
          title: Noch da!
          data:
            fontsize: large
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.wohnzimmer_tv_aus_timer
    - conditions:
      - condition: state
        entity_id: binary_sensor.living_multi_sensor_sensor
        state: 'on'
      - condition: state
        entity_id: input_boolean.wohnzimmer_tv_aus_timer
        state: 'off'
      sequence:
      - service: script.turn_off
        data: {}
        entity_id: script.wohnzimmer_tv_wird_nicht_gebraucht_also_aus
    default: []
  mode: single
- id: '1603126824106'
  alias: Button bedroom clicked
  description: ''
  trigger:
  - event_data: {}
    event_type: deconz_event
    platform: event
  condition:
  - condition: or
    conditions:
    - condition: template
      value_template: '{{trigger.event.data["id"] == "schlafzimmer_rechts_button"
        }}'
    - condition: template
      value_template: '{{trigger.event.data["id"] == "schlafzimmer_links_button" }}'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1002 }}'
      sequence:
      - service: switch.toggle
        data: {}
        entity_id: switch.bedroom_tv_switch_switch
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1004 }}'
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.force_occupied_bedroom
            state: 'off'
          sequence:
          - service: input_boolean.turn_on
            data: {}
            entity_id: input_boolean.force_occupied_bedroom
          - service: input_boolean.turn_off
            data: {}
            entity_id: input_boolean.force_light_off_bedroom
          - service: switch.turn_on
            data: {}
            entity_id: switch.bedroom_main_light_switch
        - conditions:
          - condition: state
            entity_id: input_boolean.force_occupied_bedroom
            state: 'on'
          sequence:
          - service: input_boolean.turn_off
            data: {}
            entity_id: input_boolean.force_occupied_bedroom
          - service: input_boolean.turn_on
            data: {}
            entity_id: input_boolean.force_light_off_bedroom
          - service: switch.turn_off
            data: {}
            entity_id: switch.bedroom_main_light_switch
        default: []
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1001 }}'
      sequence:
      - choose:
        - conditions:
          - condition: time
            after: '14:00:00'
            before: '21:00:00'
          sequence:
          - service: input_boolean.toggle
            data: {}
            entity_id: input_boolean.nickerchen_aktiv
        - conditions:
          - condition: time
            after: '21:00:00'
            before: '14:00:00'
          sequence:
          - service: input_boolean.toggle
            data: {}
            entity_id: input_boolean.sleepmode
        default: []
    default: []
  mode: single
- id: 71e9819268f85807601a24977be94824
  alias: Button living clicked
  description: ''
  trigger:
  - event_data: {}
    event_type: deconz_event
    platform: event
  condition:
  - condition: template
    value_template: '{{trigger.event.data["id"] == "wohnzimmer_button" }}'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1002 }}'
      sequence:
      - service: switch.toggle
        data: {}
        entity_id: switch.wohnzimmer_entertainment
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1004 }}'
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.force_occupied_living
            state: 'off'
          sequence:
          - service: input_boolean.turn_on
            data: {}
            entity_id: input_boolean.force_occupied_living
          - service: input_boolean.turn_off
            data: {}
            entity_id: input_boolean.force_light_off_living
          - service: switch.turn_on
            data: {}
            entity_id: switch.living_main_light_switch
        - conditions:
          - condition: state
            entity_id: input_boolean.force_occupied_living
            state: 'on'
          sequence:
          - service: input_boolean.turn_off
            data: {}
            entity_id: input_boolean.force_occupied_living
          - service: input_boolean.turn_on
            data: {}
            entity_id: input_boolean.force_light_off_living
          - service: switch.turn_off
            data: {}
            entity_id: switch.living_main_light_switch
        default: []
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1001 }}'
      sequence:
      - choose:
        - conditions:
          - condition: time
            after: 07:00:00
            before: 04:00:00
          - condition: state
            entity_id: sun.sun
            state: above_horizon
          sequence:
          - service: script.turn_on
            data: {}
            entity_id: script.alle_rollos_hoch
        - conditions:
          - condition: time
            after: 04:00:00
            before: 07:30:00
          - condition: not
            conditions:
            - condition: state
              entity_id: media_player.wohnzimmer_2
              state: playing
            - condition: state
              entity_id: media_player.wohnzimmer_2
              state: ''
              attribute: paused
          sequence:
          - service: script.turn_on
            data: {}
            entity_id: script.morning_eli_play_news
        - conditions:
          - condition: time
            after: 04:00:00
            before: 07:30:00
          - condition: or
            conditions:
            - condition: state
              entity_id: media_player.wohnzimmer_2
              state: playing
            - condition: state
              entity_id: media_player.wohnzimmer_2
              state: paused
          sequence:
          - service: media_player.media_play_pause
            data: {}
            entity_id: media_player.wohnzimmer_2
        default: []
    default: []
  mode: single
- id: ec80d1347ca8127571ed1d0468ed3f06
  alias: Button workingroom clicked
  description: ''
  trigger:
  - event_data: {}
    event_type: deconz_event
    platform: event
  condition:
  - condition: template
    value_template: '{{trigger.event.data["id"] == "arbeitszimmer_button" }}'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1002 }}'
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'off'
      sequence:
      - service: switch.toggle
        data: {}
        entity_id: switch.arbeitszimmer_tv_relay
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1002 }}'
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'on'
      sequence:
      - service: light.toggle
        data:
          brightness: 100
        entity_id: light.stehlicht
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1004 }}'
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: input_boolean.force_occupied_workingroom
            state: 'off'
          sequence:
          - service: input_boolean.turn_on
            data: {}
            entity_id: input_boolean.force_occupied_workingroom
          - service: input_boolean.turn_off
            data: {}
            entity_id: input_boolean.force_light_off_workingroom
          - service: switch.turn_on
            data: {}
            entity_id: switch.workingroom_main_light_switch
        - conditions:
          - condition: state
            entity_id: input_boolean.force_occupied_workingroom
            state: 'on'
          sequence:
          - service: input_boolean.turn_off
            data: {}
            entity_id: input_boolean.force_occupied_workingroom
          - service: input_boolean.turn_on
            data: {}
            entity_id: input_boolean.force_light_off_workingroom
          - service: switch.turn_off
            data: {}
            entity_id: switch.workingroom_main_light_switch
        default: []
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data["event"] == 1001 }}'
      sequence:
      - service: input_boolean.toggle
        data: {}
        entity_id: input_boolean.zeit_fur_ein_update
    default: []
  mode: single
- id: '1603475043282'
  alias: Lightstrip set halloween color
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.halloween_farben
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.halloween_farben
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          rgb_color:
          - 255
          - 63
          - 0
          brightness: 255
        entity_id: light.kuchen_lightstrip
      - service: light.turn_on
        data:
          rgb_color:
          - 255
          - 63
          - 0
          brightness: 255
        entity_id: light.wohnzimmer_couchlicht
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.lightstrip_random_color
    - conditions:
      - condition: state
        entity_id: input_boolean.halloween_farben
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.lightstrip_random_color
      - choose:
        - conditions:
          - condition: state
            entity_id: sun.sun
            state: above_horizon
          sequence:
          - service: light.turn_off
            data: {}
            entity_id: light.kuchen_lightstrip
          - service: light.turn_off
            data: {}
            entity_id: light.wohnzimmer_couchlicht
        default: []
    default: []
  mode: single
- id: '1603475480718'
  alias: Lightstrip set christmas color
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.weihnachtsfarben
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.weihnachtsfarben
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          rgb_color:
          - 0
          - 255
          - 0
          brightness: 255
        entity_id: light.kuchen_lightstrip
      - service: light.turn_on
        data:
          rgb_color:
          - 0
          - 255
          - 0
          brightness: 255
        entity_id: light.wohnzimmer_couchlicht
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.lightstrip_random_color
    - conditions:
      - condition: state
        entity_id: input_boolean.weihnachtsfarben
        state: 'off'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.lightstrip_random_color
      - choose:
        - conditions:
          - condition: state
            entity_id: sun.sun
            state: above_horizon
          sequence:
          - service: light.turn_off
            data: {}
            entity_id: light.kuchen_lightstrip
          - service: light.turn_off
            data: {}
            entity_id: light.wohnzimmer_couchlicht
        default: []
    default: []
  mode: single
- id: '1604048572605'
  alias: Wohnzimmer TV aus dann check stop
  description: ''
  trigger:
  - platform: state
    entity_id: switch.wohnzimmer_entertainment
    from: 'on'
    to: 'off'
  - platform: state
    entity_id: switch.living_beamer_switch
    to: 'on'
  condition: []
  action:
  - service: script.turn_off
    data: {}
    entity_id: script.wohnzimmer_tv_wird_nicht_gebraucht_also_aus
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.wohnzimmer_tv_aus_timer
  mode: single
- id: '1604305668810'
  alias: Nickerchen Wohnzimmer starten
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    to: 'on'
  condition: []
  action:
  - service: homeassistant.turn_off
    data: {}
    entity_id: group.living_light
  - service: homeassistant.turn_off
    data: {}
    entity_id: group.kitchen_all
  - service: homeassistant.turn_off
    data: {}
    entity_id: group.floor_light
  - service: script.turn_on
    data: {}
    entity_id: script.kueche_rollo_runter
  - service: script.turn_on
    data: {}
    entity_id: script.balkon_rollo_runter
  - service: script.turn_on
    data: {}
    entity_id: script.wohnzimmer_rollo_runter
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.rollo_automatik_kueche
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.rollo_automatik_balkon
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.rollo_automatik_wohnzimmer
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.silent_messages_only
  - service: light.turn_off
    data: {}
    entity_id: light.kuchen_lightstrip
  - service: light.turn_off
    data: {}
    entity_id: light.wohnzimmer_couchlicht
  mode: single
- id: '1604306143492'
  alias: Nickerchen Wohnzimmer - Ende
  description: ''
  trigger:
  - platform: state
    entity_id: group.living_all
    to: 'on'
  - platform: state
    entity_id: group.kitchen_all
    to: 'on'
  - platform: state
    entity_id: group.floor_light
    to: 'on'
  - platform: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.nickerchen_wohnzimmer
    state: 'on'
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.rollo_automatik_kueche
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.rollo_automatik_wohnzimmer
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.rollo_automatik_balkon
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.nickerchen_wohnzimmer
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.home_office
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode
        state: 'off'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.silent_messages_only
    default: []
  mode: single
- id: '1604332792096'
  alias: workingroom tv backlight
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.someone_in_workingroom
  condition: []
  action:
  - choose:
    - conditions:
      - condition: sun
        after_offset: -00:45:00
        after: sunset
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'on'
      - condition: state
        entity_id: sensor.scene_check_xbox
        state: 'false'
      sequence:
      - service: light.turn_on
        data: {}
        entity_id: light.arbeitszimmer_tv_licht
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'off'
      sequence:
      - service: light.turn_off
        data: {}
        entity_id: light.arbeitszimmer_tv_licht
    default: []
  mode: single
- id: '1604569797879'
  alias: Xbox zieht viel Strom ist also an dann TV an
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.workingroom_xbox_switch_power
    above: '40'
    for: 00:00:10
  - platform: state
    entity_id: media_player.dream_box
    to: 'on'
    from: 'off'
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    entity_id: switch.arbeitszimmer_tv_relay
  mode: single
- id: '1605360306045'
  alias: Schlafmodus Arbeitszimmer an dann Konsolen und tv aus
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.sleepmode_workingroom
    to: 'on'
  condition: []
  action:
  - service: switch.turn_off
    data: {}
    entity_id: switch.workingroom_xbox_switch_switch
  - service: switch.turn_off
    data: {}
    entity_id: switch.xbox_2_relay
  mode: single
- id: '1605777928321'
  alias: Schlafmodus oder NIckerchen an wenn länger licht auslassen aktiv
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.force_light_off_bedroom
    to: 'on'
    for: 00:15:00
  - platform: state
    entity_id: input_boolean.force_light_off_living
    to: 'on'
    for: 00:15:00
  condition: []
  action:
  - choose:
    - conditions:
      - condition: time
        after: '11:00:00'
        before: '20:00:00'
      - condition: state
        entity_id: input_boolean.force_light_off_bedroom
        state: 'on'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.nickerchen_aktiv
    - conditions:
      - condition: time
        after: '20:00:00'
        before: 05:00:00
      - condition: state
        entity_id: input_boolean.force_light_off_bedroom
        state: 'on'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.sleepmode
    default: []
  - choose:
    - conditions:
      - condition: time
        after: '11:00:00'
        before: '20:00:00'
      - condition: state
        entity_id: input_boolean.force_light_off_living
        state: 'on'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.nickerchen_wohnzimmer
    default: []
  mode: single
- id: '1607062062646'
  alias: Sleepmode off vor Sonnenaufgang dann Underground Licht an
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.sleepmode_kitchen
    to: 'off'
  - platform: state
    entity_id: input_boolean.sleepmode_living
    to: 'off'
  - platform: state
    entity_id: sun.sun
    to: above_horizon
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: below_horizon
      sequence:
      - service: light.turn_on
        data: {}
        entity_id: light.wohnzimmer_couchlicht
      - service: light.turn_on
        data: {}
        entity_id: light.kuchen_lightstrip
    - conditions:
      - condition: state
        entity_id: sun.sun
        state: above_horizon
      sequence:
      - service: light.turn_off
        data: {}
        entity_id: light.kuchen_lightstrip
      - service: light.turn_off
        data: {}
        entity_id: light.wohnzimmer_couchlicht
    default: []
  mode: single
- id: '1607715243270'
  alias: Living accent light schrank
  description: ''
  trigger:
  - platform: state
    entity_id: light.wohnzimmer_couchlicht
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.wohnzimmer_couchlicht
        state: 'on'
      - condition: state
        entity_id: input_boolean.sleepmode_living
        state: 'off'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.grosser_schrank_licht_schalter
      - service: switch.turn_on
        data: {}
        entity_id: switch.kleines_schrank_licht_schalter
    - conditions:
      - condition: state
        entity_id: light.wohnzimmer_couchlicht
        state: 'off'
      sequence:
      - service: switch.turn_off
        data: {}
        entity_id: switch.grosser_schrank_licht_schalter
      - service: switch.turn_off
        data: {}
        entity_id: switch.kleines_schrank_licht_schalter
    default: []
  mode: single
- id: '1607720032914'
  alias: kitchen cabinet light sync to kitchen light
  description: ''
  trigger:
  - platform: state
    entity_id: switch.kitchen_main_light_switch
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: switch.kitchen_main_light_switch
        state: 'on'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.kuche_schranklicht_schalter
    - conditions:
      - condition: state
        entity_id: switch.kitchen_main_light_switch
        state: 'off'
      sequence:
      - service: switch.turn_off
        data: {}
        entity_id: switch.kuche_schranklicht_schalter
    default: []
  mode: single
- id: '1608112523651'
  alias: dishwasher/washing done
  description: ''
  use_blueprint:
    path: homeassistant/washing_done.yaml
    input:
      power_thresold: '0.6'
      power_usage: sensor.kitchen_disher_power
      dishwasher_status: sensor.dishwasher_status
      dishwasher_done: input_boolean.dishwasher_done
- id: '1609922110339'
  alias: someone in large floor - on
  description: ''
  trigger:
  - platform: state
    entity_id: switch.large_floor_main_light
    to: 'on'
  condition: []
  action:
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.someone_in_large_floor
  mode: single
- id: '1609922181320'
  alias: someone in large floor - off
  description: ''
  trigger:
  - platform: state
    entity_id: switch.large_floor_main_light
    to: 'off'
  - platform: state
    entity_id: input_boolean.yoga
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.yoga
    state: 'off'
  action:
  - service: script.turn_on
    data: {}
    entity_id: script.someone_in_large_floor_off
  mode: single
- id: '1609922394517'
  alias: someone in large floor - light
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.someone_in_large_floor
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_large_floor
        state: 'on'
      - condition: state
        entity_id: switch.wohnzimmer_entertainment
        state: 'off'
      - condition: state
        entity_id: input_boolean.sleepmode_floor
        state: 'off'
      sequence:
      - service: switch.turn_on
        data: {}
        entity_id: switch.large_floor_main_light
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_large_floor
        state: 'off'
      - condition: state
        entity_id: input_boolean.yoga
        state: 'off'
      sequence:
      - service: switch.turn_off
        data: {}
        entity_id: switch.large_floor_main_light
    default: []
  mode: single
- id: '1609924908072'
  alias: yoga scene
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.yoga
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.yoga
        state: 'on'
      sequence:
      - service: input_boolean.turn_on
        data: {}
        entity_id: input_boolean.someone_in_large_floor
      - service: switch.turn_on
        data: {}
        entity_id: switch.large_floor_main_light
      - wait_template: '{{ is_state("light.yoga", "on") }}'
      - delay:
          seconds: 5
      - service: light.turn_on
        data:
          brightness: 255
          color_temp: 230
        entity_id: light.yoga
    - conditions:
      - condition: state
        entity_id: input_boolean.yoga
        state: 'off'
      sequence:
      - wait_template: '{{ is_state("light.yoga", "on") }}'
      - service: light.turn_on
        data:
          brightness: 255
          color_temp: 343
        entity_id: light.yoga
      - service: script.turn_on
        data: {}
        entity_id: script.someone_in_large_floor_off
    default: []
  mode: single
- id: '1609925369162'
  alias: yoga scene - end
  description: ''
  trigger:
  - platform: state
    entity_id: switch.large_floor_main_light
    to: 'off'
    from: 'on'
  - platform: event
    event_type: hue_event
    event_data:
      event: 4002
      id: hue_dimmer_switch_1
  condition:
  - condition: state
    entity_id: input_boolean.yoga
    state: 'on'
  action:
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.yoga
  mode: single
- id: '1611737837553'
  alias: give ventilation recommendation info
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.airquality_bathroom
    to: kritisch
  - platform: state
    entity_id: sensor.airquality_bedroom
    to: kritisch
  - platform: state
    entity_id: sensor.airquality_living
    to: kritisch
  - platform: state
    entity_id: sensor.airquality_storageroom
    to: kritisch
  - platform: state
    entity_id: sensor.airquality_workingroom
    to: kritisch
  - platform: state
    entity_id: input_boolean.sleepmode
    to: 'off'
    for: 00:01:00
  - platform: state
    entity_id: sensor.someone_home
    from: 'false'
    to: 'true'
  condition:
  - condition: numeric_state
    entity_id: sensor.ventilation_rooms
    above: '0'
  - condition: state
    entity_id: input_boolean.sleepmode
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: person.christian
        state: home
      sequence:
      - service: notify.devices_christian
        data:
          message: "Bitte {%- if is_state(\"sensor.airquality_living\", \"kritisch\"\
            ) and\n    is_state(\"sensor.window_kitchen_status\", \"geschlossen\"\
            ) and\n    is_state(\"sensor.window_balcony_status\", \"geschlossen\"\
            ) and\n    is_state(\"sensor.window_living_status\", \"geschlossen\")\n\
            %} Wohnzimmer, Küche, {% endif -%}  {%- if is_state(\"sensor.airquality_bathroom\"\
            , \"kritisch\") and\n    is_state(\"sensor.window_bathroom_status\", \"\
            geschlossen\")\n%} Badezimmer, {% endif -%} {%- if is_state(\"sensor.airquality_bedroom\"\
            , \"kritisch\") and\n    is_state(\"sensor.window_bedroom_status\", \"\
            geschlossen\")\n%} Schlafzimmer, {% endif -%} {%- if is_state(\"sensor.airquality_storageroom\"\
            , \"kritisch\") and\n    is_state(\"binary_sensor.abstellkammer_tur\"\
            , \"off\")\n%} Abstellraum, {% endif -%} {%- if is_state(\"sensor.airquality_workingroom\"\
            , \"kritisch\") and\n    is_state(\"sensor.window_workingroom_status\"\
            , \"geschlossen\")\n%} Arbeitszimmer, {% endif -%} lüften, die Luftfeuchtigkeit\
            \ ist zu hoch."
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: person.elitsa
        state: home
      sequence:
      - service: notify.devices_elitsa
        data:
          message: "Bitte {%- if is_state(\"sensor.airquality_living\", \"kritisch\"\
            ) and\n    is_state(\"sensor.window_kitchen_status\", \"geschlossen\"\
            ) and\n    is_state(\"sensor.window_balcony_status\", \"geschlossen\"\
            ) and\n    is_state(\"sensor.window_living_status\", \"geschlossen\")\n\
            %} Wohnzimmer, Küche, {% endif -%}  {%- if is_state(\"sensor.airquality_bathroom\"\
            , \"kritisch\") and\n    is_state(\"sensor.window_bathroom_status\", \"\
            geschlossen\")\n%} Badezimmer, {% endif -%} {%- if is_state(\"sensor.airquality_bedroom\"\
            , \"kritisch\") and\n    is_state(\"sensor.window_bedroom_status\", \"\
            geschlossen\")\n%} Schlafzimmer, {% endif -%} {%- if is_state(\"sensor.airquality_storageroom\"\
            , \"kritisch\") and\n    is_state(\"binary_sensor.abstellkammer_tur\"\
            , \"off\")\n%} Abstellraum, {% endif -%} {%- if is_state(\"sensor.airquality_workingroom\"\
            , \"kritisch\") and\n    is_state(\"sensor.window_workingroom_status\"\
            , \"geschlossen\")\n%} Arbeitszimmer, {% endif -%} lüften, die Luftfeuchtigkeit\
            \ ist zu hoch."
    default: []
  mode: single
- id: '1611828033808'
  alias: someone in guestroom - on motion
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.gastewc_motion
    to: 'on'
    for: 00:00:05
  condition: []
  action:
  - service: script.turn_off
    data: {}
    entity_id: script.someone_in_guestroom_off
  - service: input_boolean.turn_on
    data: {}
    entity_id: input_boolean.someone_in_guestroom
  mode: single
- id: '1612119769210'
  alias: Badezimmer Rollo update zum Lüften
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.window_bathroom_open_check
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.window_bathroom_open_check
        state: offen
      - condition: or
        conditions:
        - condition: state
          entity_id: input_select.rollo_stand
          state: Geschlossen
        - condition: state
          entity_id: input_boolean.sleepmode_bathroom
          state: 'on'
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.badezimmer_rollo_50
    - conditions:
      - condition: state
        entity_id: sensor.window_bathroom_open_check
        state: geschlossen
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      - condition: or
        conditions:
        - condition: state
          entity_id: input_select.rollo_stand
          state: Geschlossen
        - condition: state
          entity_id: input_boolean.sleepmode_bathroom
          state: 'on'
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.badezimmer_rollo_runter
    default: []
  mode: single
- id: '1612120058565'
  alias: Küche Rollo update zum Lüften
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.window_kitchen_open_check
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.window_kitchen_open_check
        state: offen
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.kueche_rollo_50
    - conditions:
      - condition: state
        entity_id: sensor.window_kitchen_open_check
        state: geschlossen
      - condition: state
        entity_id: input_select.rollo_stand
        state: Geschlossen
      sequence:
      - service: script.turn_on
        data: {}
        entity_id: script.kueche_rollo_runter
    default: []
  mode: single
- id: '1612250442310'
  alias: 'someone in living - light change '
  description: ''
  trigger:
  - platform: state
    entity_id: switch.wohnzimmer_stehlicht_schalter
  - platform: state
    entity_id: switch.living_main_light_switch
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_living
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.wohnzimmer_stehlicht_schalter
          state: 'on'
        - condition: state
          entity_id: switch.living_main_light_switch
          state: 'on'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_light_off_living
    - conditions:
      - condition: state
        entity_id: input_boolean.force_occupied_living
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.wohnzimmer_stehlicht_schalter
          state: 'off'
        - condition: state
          entity_id: switch.living_main_light_switch
          state: 'off'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_occupied_living
    default: []
  mode: single
- id: '1612251415748'
  alias: someone in workingroom - light change
  description: ''
  trigger:
  - platform: state
    entity_id: light.stehlicht
  - platform: state
    entity_id: switch.workingroom_light_switch
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_workingroom
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: light.stehlicht
          state: 'on'
        - condition: state
          entity_id: switch.workingroom_light_switch
          state: 'on'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_light_off_workingroom
    - conditions:
      - condition: state
        entity_id: input_boolean.force_occupied_workingroom
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: light.stehlicht
          state: 'off'
        - condition: state
          entity_id: switch.workingroom_light_switch
          state: ''
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_occupied_workingroom
    default: []
  mode: single
- id: '1612251568586'
  alias: someone in kitchen - light change
  description: ''
  trigger:
  - platform: state
    entity_id: switch.kitchen_main_light_switch
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_kitchen
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.kitchen_main_light_switch
          state: 'on'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_light_off_kitchen
    - conditions:
      - condition: state
        entity_id: input_boolean.force_occupied_kitchen
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.kitchen_main_light_switch
          state: ''
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_occupied_kitchen
    default: []
  mode: single
- id: '1612251726739'
  alias: someone in bathroom - light change
  description: ''
  trigger:
  - platform: state
    entity_id: switch.bathroom_main_light_switch
  - platform: state
    entity_id: switch.bathroom_shower_light_switch
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.force_light_off_bathroom
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.bathroom_main_light_switch
          state: 'on'
        - condition: state
          entity_id: switch.bathroom_shower_light_switch
          state: 'on'
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_light_off_bathroom
    - conditions:
      - condition: state
        entity_id: input_boolean.force_occupied_bathroom
        state: 'on'
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.bathroom_main_light_switch
          state: 'off'
        - condition: state
          entity_id: switch.bathroom_shower_light_switch
          state: ''
      sequence:
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_occupied_bathroom
    default: []
  mode: single
- id: b84310884e8abaa5a981ea4b34a46868
  alias: ask for disable busy notifiction (do not disturb)
  trigger:
  - platform: state
    entity_id: binary_sensor.christians_macbook_pro_2_microphone_in_use
    to: 'off'
    for: 00:00:10
  condition:
  - condition: state
    entity_id: input_boolean.nicht_stoeren
    state: 'on'
  action:
  - service: notify.devices_christian
    data_template:
      data:
        push:
          category: disturb
      message: Bist du noch beschätigt oder soll ich die "Bitte nicht stören" Meldung
        wieder zurücksetzen?
      title: Bitte nicht stören
  initial_state: true
  mode: single
- id: 92e9dbfb0e98b3033641302606fe863b
  alias: reset do not disturb message (do not disturb)
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: DISTURB_OFF
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.nicht_stoeren
  - service: notify.devices_christian
    data:
      message: Meldung zurückgesetzt
  initial_state: true
  mode: single
- id: cff073f3b0040c92eb01f86db732b1a9
  alias: do not disturb message stays (do not disturb)
  trigger:
  - platform: event
    event_type: ios.notification_action_fired
    event_data:
      actionName: DISTURB_ON
  action:
  - service: notify.devices_christian
    data:
      message: Meldung bleibt auf "Bitte nicht stören"
  initial_state: true
  mode: single
- id: '1612550400965'
  alias: haustür steht offen
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.floor_door_sensor
    from: 'off'
    to: 'on'
    for: 00:05:00
  - platform: state
    entity_id: input_boolean.someone_in_floor
    to: 'off'
  condition:
  - condition: state
    entity_id: binary_sensor.floor_door_sensor
    state: 'on'
  action:
  - service: notify.mobile_app_skysphone
    data_template:
      title: Haustür
      message: Die Haustür ist noch offen
      data:
        push:
          sound:
            name: default
            critical: 1
            volume: 1
  - service: notify.mobile_app_iphone
    data_template:
      title: Haustür
      message: Die Haustür ist noch offen
      data:
        push:
          sound:
            name: default
            critical: 1
            volume: 1
  - data_template:
      data:
        type: announce
      message: Die Haustür ist offen
    service: notify.alexa_media_arbeitszimmer
  - data_template:
      data:
        type: announce
      message: Die Haustür ist offen
    service: notify.alexa_media_wohnzimmer
  - data_template:
      data:
        type: announce
      message: Die Haustür ist offen
    service: notify.alexa_media_schlafzimmer
  mode: single
- id: '1612556692160'
  alias: tablets Battery check
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: sensor.tablet_arbeitszimmer
    attribute: battery_level
    below: '10'
  - platform: numeric_state
    entity_id: sensor.tablet_arbeitszimmer
    attribute: battery_level
    above: '95'
  - platform: state
    entity_id: sensor.tablet_arbeitszimmer
    from: unavailable
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.tablet_arbeitszimmer
        below: '10'
        attribute: battery_level
      - condition: template
        value_template: '{{ state_attr("sensor.tablet_arbeitszimmer", "charging")
          == false }}'
      sequence:
      - service: notify.devices_christian
        data:
          message: Tablet Arbeitszimmer auf 10% gesunken, bitte aufladen
    - conditions:
      - condition: numeric_state
        entity_id: sensor.tablet_arbeitszimmer
        attribute: battery_level
        above: '95'
      - condition: template
        value_template: '{{ state_attr("sensor.tablet_arbeitszimmer", "charging")
          == true }}'
      sequence:
      - service: notify.devices_christian
        data:
          message: Tablet Arbeitszimmer ausreichend geladen
    default: []
  mode: single
- id: '1612610897703'
  alias: trigger wall tablet for battery check - not charging
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.tablet_arbeitszimmer
    to: unavailable
    for: 01:00:00
  condition:
  - condition: state
    entity_id: input_text.tablet_arbeitszimmer_last_state_charger
    state: 'False'
  action:
  - service: rest_command.trigger_motion
    data: {}
  mode: single
- id: '1612636223715'
  alias: trigger wall tablet for battery check - charging
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.tablet_arbeitszimmer
    to: unavailable
    for: 00:10:00
  condition:
  - condition: state
    entity_id: input_text.tablet_arbeitszimmer_last_state_charger
    state: 'True'
  action:
  - service: rest_command.trigger_motion
    data: {}
  mode: single
- id: '1612637382862'
  alias: tablet last state charger update
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.tablet_arbeitszimmer
    from: unavailable
  - platform: state
    entity_id: sensor.tablet_arbeitszimmer
    attribute: charging
  condition: []
  action:
  - service: input_text.set_value
    data:
      value: '{{ state_attr("sensor.tablet_arbeitszimmer", "charging") }}'
    entity_id: input_text.tablet_arbeitszimmer_last_state_charger
  mode: single
- id: '1612718305454'
  alias: trigger wall tablet for battery check - not charging test
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.tablet_arbeitszimmer
    to: unavailable
  condition:
  - condition: state
    entity_id: input_text.tablet_arbeitszimmer_last_state_charger
    state: 'False'
  action:
  - service: rest_command.trigger_motion
    data: {}
  mode: single
- id: '1612726093188'
  alias: update wall tablet workingroom motion
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.someone_in_workingroom
  - platform: state
    entity_id: input_text.tablet_arbeitszimmer_last_state_charger
  - platform: state
    entity_id: sensor.workingroom_multi_sensor_luminance
  - platform: state
    entity_id: input_boolean.sleepmode_workingroom
    to: 'on'
  - platform: state
    entity_id: input_boolean.home_office
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'on'
      - condition: state
        entity_id: input_text.tablet_arbeitszimmer_last_state_charger
        state: 'False'
      - condition: numeric_state
        entity_id: sensor.workingroom_multi_sensor_luminance
        above: '10'
      - condition: state
        entity_id: input_boolean.home_office
        state: 'off'
      sequence:
      - service: rest_command.trigger_motion
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 0
      - service: rest_command.change_setting_boolean
        data:
          key: motionDetection
          value: true
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'on'
      - condition: state
        entity_id: input_text.tablet_arbeitszimmer_last_state_charger
        state: 'False'
      - condition: numeric_state
        entity_id: sensor.workingroom_multi_sensor_luminance
        below: '10'
      sequence:
      - service: rest_command.trigger_motion
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 0
      - service: rest_command.change_setting_boolean
        data:
          key: motionDetection
          value: false
    - conditions:
      - condition: state
        entity_id: input_boolean.someone_in_workingroom
        state: 'on'
      - condition: state
        entity_id: input_text.tablet_arbeitszimmer_last_state_charger
        state: 'True'
      sequence:
      - service: rest_command.trigger_motion
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 0
      - service: rest_command.change_setting_boolean
        data:
          key: motionDetection
          value: false
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: input_boolean.someone_in_workingroom
          state: 'off'
        - condition: state
          entity_id: input_boolean.sleepmode_workingroom
          state: 'on'
        - condition: state
          entity_id: input_boolean.home_office
          state: 'on'
      sequence:
      - service: rest_command.trigger_motion
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 0
      - service: rest_command.change_setting_boolean
        data:
          key: motionDetection
          value: false
    default: []
  mode: single
- id: '1612779543634'
  alias: sleepmode workingroom
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.sleepmode_workingroom
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_boolean.sleepmode_workingroom
        state: 'on'
      sequence:
      - service: script.arbeitszimmer_rollo_runter
        data: {}
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_occupied_workingroom
      - service: input_boolean.turn_off
        data: {}
        entity_id: input_boolean.force_light_off_workingroom
      - service: switch.turn_off
        data: {}
        entity_id: switch.workingroom_light_switch
      - delay:
          hours: 0
          minutes: 1
          seconds: 0
          milliseconds: 0
      - service: homeassistant.turn_off
        data: {}
        entity_id: group.workingroom_light
    default: []
  mode: single
